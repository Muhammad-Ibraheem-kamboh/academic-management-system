<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akhuwat College Principal App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { 
                transform: translateX(-100%); 
            }
            to { 
                transform: translateX(0); 
            }
        }
        
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .gradient-blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .gradient-green {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        
        .gradient-orange {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        }
        
        .sidebar-transition {
            transition: all 0.3s ease-in-out;
        }
        
        .nav-item {
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-right: 4px solid #fff;
        }
        
        .stats-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .logo-animation {
            animation: logoFloat 3s ease-in-out infinite;
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .mobile-menu-overlay {
            backdrop-filter: blur(4px);
            background: rgba(0, 0, 0, 0.5);
        }
        
        .modal-backdrop {
            backdrop-filter: blur(4px);
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.open {
                transform: translateX(0);
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Mobile Menu Overlay -->
    <div id="mobileOverlay" class="fixed inset-0 mobile-menu-overlay z-40 hidden md:hidden"></div>
    
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 logo-animation">
                    <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                        <path d="M9 12l2 2 4-4" stroke="white" stroke-width="2" fill="none"/>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Akhuwat College Kasur</h1>
                <p class="text-gray-600">Principal Management System</p>
            </div>
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter username" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter password" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                    <select id="role" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="principal">Principal</option>
                        <option value="teacher">Teacher</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <button type="submit" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-lg hover:from-purple-600 hover:to-pink-600 transition duration-200 font-medium">Login</button>
            </form>
        </div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="fixed left-0 top-0 h-full w-64 gradient-bg text-white z-50 sidebar sidebar-transition slide-in hidden flex flex-col">
        <!-- Logo Section -->
        <div class="p-6 border-b border-white border-opacity-20">
            <div class="flex items-center space-x-3">
                <!-- ACK Logo -->
                <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center logo-animation">
                    <span class="text-purple-600 text-xs font-bold">ACK</span>
                </div>
                <div>
                    <h1 class="text-xl font-bold">Akhuwat College Kasur</h1>
                    <p class="text-sm opacity-80">Principal Dashboard</p>
                </div>
            </div>
        </div>
        
        <!-- Navigation Menu -->
        <nav class="mt-6 px-4 flex-1 overflow-y-auto">
            <div class="space-y-2 pb-20">
                <a href="#" onclick="showSection('dashboard')" class="nav-item active flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
                
                <a href="#" onclick="showSection('students')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>Students</span>
                </a>
                
                <a href="#" onclick="showSection('timetable')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                    </svg>
                    <span>Timetable</span>
                </a>
                
                <a href="#" onclick="showSection('warnings')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"/>
                    </svg>
                    <span>Warnings</span>
                </a>
                
                <a href="#" onclick="showSection('results')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                    </svg>
                    <span>Results</span>
                </a>
                
                <a href="#" onclick="showSection('attendance')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
                    </svg>
                    <span>Attendance</span>
                </a>
                
                <a href="#" onclick="showSection('exams')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                        <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a2 2 0 002 2h4a2 2 0 002-2V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 3a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z"/>
                    </svg>
                    <span>Exams</span>
                </a>
                
                <a href="#" onclick="showSection('university')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                    </svg>
                    <span>University Prep</span>
                </a>
                
                <a href="#" onclick="showSection('alumni')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                    </svg>
                    <span>Alumni</span>
                </a>
                
                <a href="#" onclick="showSection('teachers')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
                    </svg>
                    <span>Teachers</span>
                </a>
                
                <a href="#" onclick="showSection('hostel')" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3 2h2v4H7V6zm2 6H7v2h2v-2zm2-6h2v4h-2V6zm2 6h-2v2h2v-2z"/>
                    </svg>
                    <span>Hostel</span>
                </a>
            </div>
        </nav>
        
        <!-- User Profile Section -->
        <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-white border-opacity-20">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
                    </svg>
                </div>
                <div class="flex-1">
                    <p class="text-sm font-medium" id="sidebarUserName">Principal</p>
                    <p class="text-xs opacity-75">Administrator</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="hidden min-h-screen">
        <!-- Main Content -->
        <div class="ml-0 md:ml-64 min-h-screen">
            <!-- Header -->
            <header class="bg-white shadow-lg border-b border-gray-200 sticky top-0 z-30">
                <div class="px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between items-center py-4">
                        <!-- Mobile Menu Button -->
                        <button id="mobileMenuBtn" class="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                            </svg>
                        </button>
                        
                        <!-- Page Title -->
                        <div class="flex-1 md:flex-none">
                            <h1 id="pageTitle" class="text-2xl font-bold text-gray-800">Dashboard</h1>
                            <p class="text-sm text-gray-600 hidden md:block">Welcome to Akhuwat College Management System</p>
                        </div>
                        
                        <!-- Header Actions -->
                        <div class="flex items-center space-x-4">
                            <!-- Notifications -->
                            <button class="relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM10.07 2.82l3.12 3.12M7.05 5.84L3.93 8.96M2 12h4M5.84 16.95l3.12-3.12"/>
                                </svg>
                                <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full pulse-animation"></span>
                            </button>
                            
                            <!-- Profile Dropdown -->
                            <div class="relative">
                                <button id="profileBtn" class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors">
                                    <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-sm font-bold" id="userInitials">P</span>
                                    </div>
                                    <div class="hidden md:block text-left">
                                        <p class="text-sm font-medium text-gray-700" id="headerUserName">Principal</p>
                                        <p class="text-xs text-gray-500">Administrator</p>
                                    </div>
                                    <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                    </svg>
                                </button>
                                
                                <!-- Dropdown Menu -->
                                <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50">
                                    <div class="py-2">
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile Settings</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Preferences</a>
                                        <div class="border-t border-gray-200 my-1"></div>
                                        <button onclick="logout()" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="p-4 sm:p-6 lg:p-8">
                <!-- Dashboard Section -->
                <div id="dashboardSection" class="section">
                    <!-- Welcome Banner -->
                    <div class="gradient-bg rounded-2xl p-8 mb-8 text-white fade-in">
                        <div class="flex flex-col md:flex-row items-center justify-between">
                            <div class="mb-6 md:mb-0">
                                <h2 class="text-3xl md:text-4xl font-bold mb-2">Welcome Back, Principal!</h2>
                                <p class="text-lg opacity-90">Manage your college efficiently with our comprehensive system</p>
                                <div class="mt-4 flex flex-wrap gap-2">
                                    <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm">📚 Academic Excellence</span>
                                    <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm">🎓 Student Success</span>
                                    <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm">⭐ Quality Education</span>
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="w-32 h-32 bg-white bg-opacity-20 rounded-full flex items-center justify-center mb-4 logo-animation">
                                    <svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                                        <path d="M9 12l2 2 4-4" stroke="white" stroke-width="2" fill="none"/>
                                    </svg>
                                </div>
                                <p class="text-sm opacity-75">Akhuwat College Kasur (ACK)</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stats-card rounded-xl p-6 hover-lift fade-in" style="animation-delay: 0.1s">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Total Students</p>
                                    <p class="text-3xl font-bold text-gray-900" id="totalStudentsCount">0</p>
                                    <p class="text-sm text-green-600">↗ +12% from last month</p>
                                </div>
                                <div class="w-12 h-12 gradient-blue rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-card rounded-xl p-6 hover-lift fade-in" style="animation-delay: 0.2s">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Active Teachers</p>
                                    <p class="text-3xl font-bold text-gray-900" id="activeTeachersCount">0</p>
                                    <p class="text-sm text-blue-600">↗ +3 new this month</p>
                                </div>
                                <div class="w-12 h-12 gradient-green rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-card rounded-xl p-6 hover-lift fade-in" style="animation-delay: 0.3s">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Attendance Rate</p>
                                    <p class="text-3xl font-bold text-gray-900">94.5%</p>
                                    <p class="text-sm text-green-600">↗ +2.1% improvement</p>
                                </div>
                                <div class="w-12 h-12 gradient-purple rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stats-card rounded-xl p-6 hover-lift fade-in" style="animation-delay: 0.4s">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600">Pending Warnings</p>
                                    <p class="text-3xl font-bold text-gray-900" id="pendingWarningsCount">0</p>
                                    <p class="text-sm text-red-600">Requires attention</p>
                                </div>
                                <div class="w-12 h-12 gradient-orange rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <!-- Quick Actions Card -->
                        <div class="bg-white rounded-xl shadow-lg p-6 fade-in" style="animation-delay: 0.5s">
                            <h3 class="text-xl font-bold text-gray-800 mb-6">Quick Actions</h3>
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="showSection('students')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group">
                                    <div class="text-center">
                                        <svg class="w-8 h-8 mx-auto mb-2 text-gray-400 group-hover:text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"/>
                                        </svg>
                                        <p class="text-sm font-medium text-gray-700 group-hover:text-blue-700">Add Student</p>
                                    </div>
                                </button>
                                
                                <button onclick="showSection('timetable')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all group">
                                    <div class="text-center">
                                        <svg class="w-8 h-8 mx-auto mb-2 text-gray-400 group-hover:text-green-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                                        </svg>
                                        <p class="text-sm font-medium text-gray-700 group-hover:text-green-700">Manage Timetable</p>
                                    </div>
                                </button>
                                
                                <button onclick="showSection('results')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all group">
                                    <div class="text-center">
                                        <svg class="w-8 h-8 mx-auto mb-2 text-gray-400 group-hover:text-purple-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                                        </svg>
                                        <p class="text-sm font-medium text-gray-700 group-hover:text-purple-700">View Results</p>
                                    </div>
                                </button>
                                
                                <button onclick="showSection('attendance')" class="p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all group">
                                    <div class="text-center">
                                        <svg class="w-8 h-8 mx-auto mb-2 text-gray-400 group-hover:text-orange-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
                                        </svg>
                                        <p class="text-sm font-medium text-gray-700 group-hover:text-orange-700">Take Attendance</p>
                                    </div>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Recent Activity -->
                        <div class="bg-white rounded-xl shadow-lg p-6 fade-in" style="animation-delay: 0.6s">
                            <h3 class="text-xl font-bold text-gray-800 mb-6">Recent Activity</h3>
                            <div class="space-y-4">
                                <div class="flex items-center space-x-3 p-3 bg-blue-50 rounded-lg">
                                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">New student admission completed</p>
                                        <p class="text-xs text-gray-500">2 minutes ago</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-3 p-3 bg-green-50 rounded-lg">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">Monthly attendance report generated</p>
                                        <p class="text-xs text-gray-500">1 hour ago</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg">
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">Timetable updated for 2nd Year ICS</p>
                                        <p class="text-xs text-gray-500">3 hours ago</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-3 p-3 bg-purple-50 rounded-lg">
                                    <div class="w-2 h-2 bg-purple-500 rounded-full"></div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">Exam results published</p>
                                        <p class="text-xs text-gray-500">1 day ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Class Overview -->
                    <div class="bg-white rounded-xl shadow-lg p-6 fade-in" style="animation-delay: 0.7s">
                        <h3 class="text-xl font-bold text-gray-800 mb-6">Class Overview</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl">
                                <div class="w-16 h-16 gradient-blue rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-white text-xl font-bold">1st</span>
                                </div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-2">First Year</h4>
                                <p class="text-3xl font-bold text-blue-600" id="firstYearCount">0</p>
                                <p class="text-sm text-gray-600">Students</p>
                            </div>
                            
                            <div class="text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl">
                                <div class="w-16 h-16 gradient-green rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-white text-xl font-bold">2nd</span>
                                </div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-2">Second Year</h4>
                                <p class="text-3xl font-bold text-green-600" id="secondYearCount">0</p>
                                <p class="text-sm text-gray-600">Students</p>
                            </div>
                            
                            <div class="text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl">
                                <div class="w-16 h-16 gradient-purple rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-white text-xl font-bold">🏠</span>
                                </div>
                                <h4 class="text-lg font-semibold text-gray-800 mb-2">Hostel Students</h4>
                                <p class="text-3xl font-bold text-purple-600" id="hostelStudentsCount">0</p>
                                <p class="text-sm text-gray-600">Residents</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Students Section -->
                <div id="studentsSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Student Management</h2>
                            <button onclick="showAddStudentModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Add Student</button>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <input type="text" id="studentSearch" placeholder="Search by name or college number" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="filterStudents()">
                            <select id="classFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterStudents()">
                                <option value="">All Classes</option>
                                <option value="ICS-I">ICS-I</option>
                                <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                <option value="Pre-Medical-I">Pre-Medical-I</option>
                                <option value="ICS-II">ICS-II</option>
                                <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                <option value="Pre-Medical-II">Pre-Medical-II</option>
                            </select>
                            <select id="houseFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterStudents()">
                                <option value="">All Houses</option>
                                <option value="Ikhlas">Ikhlas</option>
                                <option value="Ihsaan">Ihsaan</option>
                            </select>
                        </div>

                        <!-- Students Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-blue-500 to-purple-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">College No.</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Father Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Class</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">House</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTableBody" class="divide-y divide-gray-200">
                                    <!-- Students will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Other sections (Timetable, Warnings, etc.) -->
                <div id="timetableSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Timetable Management</h2>
                            <div class="flex space-x-4">
                                <button onclick="showTimetableHistory()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition duration-200">View History</button>
                                <button onclick="showUploadTimetableModal()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">Upload Image</button>
                                <button onclick="createNewTimetable()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Create New</button>
                            </div>
                        </div>
                        
                        <!-- Timetable Mode Selection -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border-2 border-dashed border-blue-300">
                                <h3 class="text-lg font-semibold text-gray-800 mb-2">📝 Create Digital Timetable</h3>
                                <p class="text-sm text-gray-600 mb-3">Create an interactive timetable with editable cells</p>
                                <button onclick="showCreateTimetableModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Start Creating</button>
                            </div>
                            <div class="bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg border-2 border-dashed border-green-300">
                                <h3 class="text-lg font-semibold text-gray-800 mb-2">📷 Upload Timetable Image</h3>
                                <p class="text-sm text-gray-600 mb-3">Upload a photo or scan of existing timetable</p>
                                <button onclick="showUploadTimetableModal()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">Upload Image</button>
                            </div>
                        </div>
                        
                        <!-- Teacher Assignment -->
                        <div class="bg-yellow-50 p-4 rounded-lg mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-3">👨‍🏫 Teacher Timetable Assignment</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <select id="assignTeacher" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Select Teacher</option>
                                </select>
                                <select id="assignClass" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Select Class</option>
                                    <option value="ICS-I">ICS-I</option>
                                    <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                    <option value="Pre-Medical-I">Pre-Medical-I</option>
                                    <option value="ICS-II">ICS-II</option>
                                    <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                    <option value="Pre-Medical-II">Pre-Medical-II</option>
                                </select>
                                <button onclick="assignTimetableToTeacher()" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition duration-200">Assign Timetable</button>
                            </div>
                        </div>
                        
                        <!-- Timetable Display Area -->
                        <div class="overflow-x-auto">
                            <div id="timetableGrid" class="min-w-full">
                                <div class="text-center py-12 text-gray-500">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                                    </svg>
                                    <p class="text-lg font-medium">No timetable created yet</p>
                                    <p class="text-sm">Create a new timetable or upload an image to get started</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="warningsSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Warning System</h2>
                            <button onclick="showAddWarningModal()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition duration-200">Issue Warning</button>
                        </div>
                        
                        <!-- Warning Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">1st Warnings</p>
                                        <p class="text-3xl font-bold text-yellow-600" id="firstWarningsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-xl font-bold">1</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">2nd Warnings</p>
                                        <p class="text-3xl font-bold text-orange-600" id="secondWarningsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-xl font-bold">2</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">3rd Warnings</p>
                                        <p class="text-3xl font-bold text-red-600" id="thirdWarningsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-xl font-bold">3</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Exited Students</p>
                                        <p class="text-3xl font-bold text-gray-600" id="exitedStudentsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-gray-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Warnings Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-red-500 to-orange-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">College No.</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Class</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Warning Level</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Status</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="warningsTableBody" class="divide-y divide-gray-200">
                                    <!-- Warnings will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="resultsSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Academic Results Management</h2>
                            <div class="flex space-x-4">
                                <button onclick="showResultHistoryModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition duration-200">View History</button>
                                <button onclick="showAddResultModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Add Result</button>
                            </div>
                        </div>
                        
                        <!-- Result Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Total Results</p>
                                        <p class="text-3xl font-bold text-blue-600" id="totalResultsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Pass Rate</p>
                                        <p class="text-3xl font-bold text-green-600" id="passRateCount">0%</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Average Marks</p>
                                        <p class="text-3xl font-bold text-purple-600" id="averageMarksCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Top Performers</p>
                                        <p class="text-3xl font-bold text-orange-600" id="topPerformersCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <input type="text" id="resultSearch" placeholder="Search by student name" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="filterResults()">
                            <select id="resultClassFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterResults()">
                                <option value="">All Classes</option>
                                <option value="ICS-I">ICS-I</option>
                                <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                <option value="Pre-Medical-I">Pre-Medical-I</option>
                                <option value="ICS-II">ICS-II</option>
                                <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                <option value="Pre-Medical-II">Pre-Medical-II</option>
                            </select>
                            <select id="resultExamFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterResults()">
                                <option value="">All Exams</option>
                                <option value="Monthly Test">Monthly Test</option>
                                <option value="Mid Term">Mid Term</option>
                                <option value="Final Term">Final Term</option>
                                <option value="Annual Exam">Annual Exam</option>
                            </select>
                            <select id="resultSubjectFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterResults()">
                                <option value="">All Subjects</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="English">English</option>
                                <option value="Urdu">Urdu</option>
                            </select>
                        </div>
                        
                        <!-- Results Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-blue-500 to-purple-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">College No.</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Student Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Class</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Subject</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Exam Type</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Marks</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Grade</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Date</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="resultsTableBody" class="divide-y divide-gray-200">
                                    <!-- Results will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="attendanceSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Attendance Management</h2>
                            <div class="flex space-x-4">
                                <button onclick="showAttendanceHistoryModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition duration-200">View History</button>
                                <button onclick="markTodayAttendance()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">Mark Today's Attendance</button>
                            </div>
                        </div>
                        
                        <!-- Attendance Controls -->
                        <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                            <select id="attendanceClass" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="loadClassAttendance()">
                                <option value="">All Classes</option>
                                <option value="ICS-I">ICS-I</option>
                                <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                <option value="Pre-Medical-I">Pre-Medical-I</option>
                                <option value="ICS-II">ICS-II</option>
                                <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                <option value="Pre-Medical-II">Pre-Medical-II</option>
                            </select>
                            <input type="date" id="attendanceDate" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="loadAttendanceByDate()">
                            <select id="attendanceSubject" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="loadClassAttendance()">
                                <option value="">Select Subject</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="English">English</option>
                                <option value="Urdu">Urdu</option>
                                <option value="Islamic Studies">Islamic Studies</option>
                                <option value="Pakistan Studies">Pakistan Studies</option>
                            </select>
                            <button onclick="loadClassAttendance()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition duration-200">Load Students</button>
                            <button onclick="saveAttendance()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Save Attendance</button>
                        </div>
                        
                        <!-- Attendance Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Present Today</p>
                                        <p class="text-3xl font-bold text-green-600" id="presentTodayCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Absent Today</p>
                                        <p class="text-3xl font-bold text-red-600" id="absentTodayCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Late Arrivals</p>
                                        <p class="text-3xl font-bold text-yellow-600" id="lateArrivalsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Attendance Rate</p>
                                        <p class="text-3xl font-bold text-blue-600" id="attendanceRateCount">0%</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Class Register Style Attendance -->
                        <div class="bg-gray-50 p-4 rounded-lg mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📋 Class Register - <span id="selectedClassName">Select a class</span></h3>
                            <div class="text-sm text-gray-600 mb-4">
                                Date: <span id="attendanceDisplayDate"></span> | Subject: <span id="attendanceDisplaySubject">Select subject</span>
                            </div>
                        </div>
                        
                        <!-- Attendance Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto border-collapse border border-gray-300">
                                <thead class="bg-gradient-to-r from-green-500 to-blue-600 text-white">
                                    <tr>
                                        <th class="border border-gray-300 px-2 py-2 text-left text-sm font-medium">S.No</th>
                                        <th class="border border-gray-300 px-3 py-2 text-left text-sm font-medium">College Number</th>
                                        <th class="border border-gray-300 px-4 py-2 text-left text-sm font-medium">Student Name</th>
                                        <!-- Dynamic date columns will be added here -->
                                        <th id="dateColumns" class="border border-gray-300 px-2 py-2 text-center text-sm font-medium">
                                            <!-- Date headers will be populated by JavaScript -->
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="attendanceTableBody" class="divide-y divide-gray-200">
                                    <tr>
                                        <td colspan="4" class="border border-gray-300 px-4 py-8 text-center text-gray-500">
                                            Please select a class to view attendance register
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="examsSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Examination Management</h2>
                            <div class="flex space-x-4">
                                <button onclick="showExamHistoryModal()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition duration-200">View History</button>
                                <button onclick="showAddExamModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Schedule Exam</button>
                            </div>
                        </div>
                        
                        <!-- Exam Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Upcoming Exams</p>
                                        <p class="text-3xl font-bold text-blue-600" id="upcomingExamsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Ongoing Exams</p>
                                        <p class="text-3xl font-bold text-green-600" id="ongoingExamsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Completed Exams</p>
                                        <p class="text-3xl font-bold text-purple-600" id="completedExamsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Total Students</p>
                                        <p class="text-3xl font-bold text-orange-600" id="examStudentsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Exam Calendar View -->
                        <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📅 Exam Calendar</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-white p-4 rounded-lg border-l-4 border-blue-500">
                                    <h4 class="font-semibold text-blue-700">This Week</h4>
                                    <div id="thisWeekExams" class="mt-2 text-sm text-gray-600">
                                        No exams scheduled
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border-l-4 border-green-500">
                                    <h4 class="font-semibold text-green-700">Next Week</h4>
                                    <div id="nextWeekExams" class="mt-2 text-sm text-gray-600">
                                        No exams scheduled
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border-l-4 border-purple-500">
                                    <h4 class="font-semibold text-purple-700">This Month</h4>
                                    <div id="thisMonthExams" class="mt-2 text-sm text-gray-600">
                                        No exams scheduled
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <input type="text" id="examSearch" placeholder="Search exams..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="filterExams()">
                            <select id="examClassFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterExams()">
                                <option value="">All Classes</option>
                                <option value="ICS-I">ICS-I</option>
                                <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                <option value="Pre-Medical-I">Pre-Medical-I</option>
                                <option value="ICS-II">ICS-II</option>
                                <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                <option value="Pre-Medical-II">Pre-Medical-II</option>
                            </select>
                            <select id="examTypeFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterExams()">
                                <option value="">All Types</option>
                                <option value="Monthly Test">Monthly Test</option>
                                <option value="Mid Term">Mid Term</option>
                                <option value="Final Term">Final Term</option>
                                <option value="Annual Exam">Annual Exam</option>
                                <option value="Quiz">Quiz</option>
                            </select>
                            <select id="examStatusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterExams()">
                                <option value="">All Status</option>
                                <option value="Scheduled">Scheduled</option>
                                <option value="Ongoing">Ongoing</option>
                                <option value="Completed">Completed</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                        
                        <!-- Exams Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-blue-500 to-purple-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Exam Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Subject</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Class</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Date & Time</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Duration</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Room</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Status</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="examsTableBody" class="divide-y divide-gray-200">
                                    <!-- Exams will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="universitySection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">University Preparation (2nd Year Only)</h2>
                            <button onclick="showAddStudentUniModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200">Add Student Uni</button>
                        </div>
                        
                        <!-- University Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">NET Applications</p>
                                        <p class="text-3xl font-bold text-blue-600" id="netCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-sm font-bold">NET</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">FAST Applications</p>
                                        <p class="text-3xl font-bold text-green-600" id="fastCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">FAST</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">LUMS Applications</p>
                                        <p class="text-3xl font-bold text-purple-600" id="lumsCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">LUMS</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Other Universities</p>
                                        <p class="text-3xl font-bold text-orange-600" id="otherUniversitiesCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- University Applications Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-blue-500 to-purple-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">College No.</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Class</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">University</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Progress</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Status</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="universityTableBody" class="divide-y divide-gray-200">
                                    <!-- University applications will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="alumniSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Alumni Records</h2>
                            <button onclick="showAddAlumniModal()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition duration-200">Add Alumni</button>
                        </div>
                        
                        <!-- Alumni Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Total Alumni</p>
                                        <p class="text-3xl font-bold text-blue-600" id="totalAlumniCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Engineering</p>
                                        <p class="text-3xl font-bold text-green-600" id="engineeringAlumniCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Medical</p>
                                        <p class="text-3xl font-bold text-red-600" id="medicalAlumniCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Computer Science</p>
                                        <p class="text-3xl font-bold text-purple-600" id="csAlumniCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Group-wise Divisions -->
                        <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">📊 Group-wise Alumni Distribution</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-white p-4 rounded-lg border-l-4 border-blue-500">
                                    <h4 class="font-semibold text-blue-700">ICS Group</h4>
                                    <div id="icsAlumniStats" class="mt-2 text-sm text-gray-600">
                                        <p>Total: <span id="icsAlumniTotal">0</span></p>
                                        <p>Success Rate: <span id="icsSuccessRate">0%</span></p>
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border-l-4 border-green-500">
                                    <h4 class="font-semibold text-green-700">Pre-Engineering</h4>
                                    <div id="preEngAlumniStats" class="mt-2 text-sm text-gray-600">
                                        <p>Total: <span id="preEngAlumniTotal">0</span></p>
                                        <p>Success Rate: <span id="preEngSuccessRate">0%</span></p>
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border-l-4 border-red-500">
                                    <h4 class="font-semibold text-red-700">Pre-Medical</h4>
                                    <div id="preMedAlumniStats" class="mt-2 text-sm text-gray-600">
                                        <p>Total: <span id="preMedAlumniTotal">0</span></p>
                                        <p>Success Rate: <span id="preMedSuccessRate">0%</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <input type="text" id="alumniSearch" placeholder="Search alumni..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="filterAlumni()">
                            <select id="alumniGroupFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterAlumni()">
                                <option value="">All Groups</option>
                                <option value="ICS">ICS</option>
                                <option value="Pre-Engineering">Pre-Engineering</option>
                                <option value="Pre-Medical">Pre-Medical</option>
                            </select>
                            <select id="alumniFieldFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterAlumni()">
                                <option value="">All Fields</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Medical">Medical</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="Business">Business</option>
                                <option value="Other">Other</option>
                            </select>
                            <select id="alumniYearFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterAlumni()">
                                <option value="">All Years</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                                <option value="2021">2021</option>
                                <option value="2020">2020</option>
                                <option value="2019">2019</option>
                            </select>
                        </div>
                        
                        <!-- Alumni Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-green-500 to-blue-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">College No.</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Group</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Graduation Year</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Current Field</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">University/Job</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Contact</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="alumniTableBody" class="divide-y divide-gray-200">
                                    <!-- Alumni will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="teachersSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Teacher Management</h2>
                            <button onclick="showAddTeacherModal()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition duration-200">Add Teacher</button>
                        </div>
                        
                        <!-- Teacher Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Science Teachers</p>
                                        <p class="text-3xl font-bold text-blue-600" id="scienceTeachersCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Arts Teachers</p>
                                        <p class="text-3xl font-bold text-green-600" id="artsTeachersCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Other Subjects</p>
                                        <p class="text-3xl font-bold text-purple-600" id="otherTeachersCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <input type="text" id="teacherSearch" placeholder="Search by name" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="filterTeachers()">
                            <select id="subjectFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterTeachers()">
                                <option value="">All Subjects</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="English">English</option>
                                <option value="Urdu">Urdu</option>
                                <option value="Islamic Studies">Islamic Studies</option>
                                <option value="Pakistan Studies">Pakistan Studies</option>
                            </select>
                            <select id="statusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterTeachers()">
                                <option value="">All Status</option>
                                <option value="Active">Active</option>
                                <option value="On Leave">On Leave</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                        
                        <!-- Teachers Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-green-500 to-blue-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Teacher ID</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Subject</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Classes</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Contact</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Status</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="teachersTableBody" class="divide-y divide-gray-200">
                                    <!-- Teachers will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="hostelSection" class="section hidden">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">Hostel Management</h2>
                            <button onclick="showAddHostelStudentModal()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition duration-200">Add Hostel Student</button>
                        </div>
                        
                        <!-- Hostel Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Total Residents</p>
                                        <p class="text-3xl font-bold text-blue-600" id="totalHostelStudents">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3 2h2v4H7V6zm2 6H7v2h2v-2zm2-6h2v4h-2V6zm2 6h-2v2h2v-2z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Ikhlas House</p>
                                        <p class="text-3xl font-bold text-green-600" id="ikhlasHouseCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-sm font-bold">I</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Ihsaan House</p>
                                        <p class="text-3xl font-bold text-purple-600" id="ihsaanHouseCount">0</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <span class="text-white text-sm font-bold">H</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card rounded-xl p-6 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Avg Attendance</p>
                                        <p class="text-3xl font-bold text-orange-600" id="hostelAvgAttendance">0%</p>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- House-wise Information -->
                        <div class="bg-gradient-to-r from-green-50 to-purple-50 p-6 rounded-lg mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">🏠 House-wise Information</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-white p-6 rounded-lg border-l-4 border-green-500">
                                    <h4 class="font-semibold text-green-700 mb-3">Ikhlas House</h4>
                                    <div class="space-y-2">
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">Total Students:</span>
                                            <span class="text-sm font-medium" id="ikhlasTotal">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">1st Year:</span>
                                            <span class="text-sm font-medium" id="ikhlas1stYear">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">2nd Year:</span>
                                            <span class="text-sm font-medium" id="ikhlas2ndYear">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">Avg Attendance:</span>
                                            <span class="text-sm font-medium" id="ikhlasAttendance">0%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white p-6 rounded-lg border-l-4 border-purple-500">
                                    <h4 class="font-semibold text-purple-700 mb-3">Ihsaan House</h4>
                                    <div class="space-y-2">
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">Total Students:</span>
                                            <span class="text-sm font-medium" id="ihsaanTotal">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">1st Year:</span>
                                            <span class="text-sm font-medium" id="ihsaan1stYear">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">2nd Year:</span>
                                            <span class="text-sm font-medium" id="ihsaan2ndYear">0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-sm text-gray-600">Avg Attendance:</span>
                                            <span class="text-sm font-medium" id="ihsaanAttendance">0%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <input type="text" id="hostelSearch" placeholder="Search hostel students..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" oninput="filterHostelStudents()">
                            <select id="hostelHouseFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterHostelStudents()">
                                <option value="">All Houses</option>
                                <option value="Ikhlas">Ikhlas</option>
                                <option value="Ihsaan">Ihsaan</option>
                            </select>
                            <select id="hostelClassFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="filterHostelStudents()">
                                <option value="">All Classes</option>
                                <option value="ICS-I">ICS-I</option>
                                <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                <option value="Pre-Medical-I">Pre-Medical-I</option>
                                <option value="ICS-II">ICS-II</option>
                                <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                <option value="Pre-Medical-II">Pre-Medical-II</option>
                            </select>
                        </div>
                        
                        <!-- Hostel Students Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto">
                                <thead class="bg-gradient-to-r from-purple-500 to-blue-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-sm font-medium">College No.</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Name</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Class</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">House</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Room No.</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Attendance %</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Parent Contact</th>
                                        <th class="px-4 py-3 text-left text-sm font-medium">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="hostelTableBody" class="divide-y divide-gray-200">
                                    <!-- Hostel students will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Add Student Modal -->
    <div id="addStudentModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 id="studentModalTitle" class="text-xl font-bold text-gray-800">Add New Student</h3>
                    <button onclick="closeModal('addStudentModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addStudentForm" class="space-y-4">
                    <input type="hidden" name="studentId" id="editStudentId">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">College Number</label>
                            <input type="text" name="collegeNumber" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                            <input type="text" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Class</label>
                            <select name="class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Class</option>
                                <option value="ICS-I">ICS-I</option>
                                <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                <option value="Pre-Medical-I">Pre-Medical-I</option>
                                <option value="ICS-II">ICS-II</option>
                                <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                <option value="Pre-Medical-II">Pre-Medical-II</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Father Name</label>
                            <input type="text" name="fatherName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">House</label>
                            <select name="house" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select House</option>
                                <option value="Ikhlas">Ikhlas</option>
                                <option value="Ihsaan">Ihsaan</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Parent/Guardian Name</label>
                            <input type="text" name="parentName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Parent Contact</label>
                            <input type="tel" name="parentContact" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" pattern="[0-9]*" oninput="this.value = this.value.replace(/[^0-9]/g, '')" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Emergency Contact</label>
                            <input type="tel" name="emergencyContact" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" pattern="[0-9]*" oninput="this.value = this.value.replace(/[^0-9]/g, '')" required>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addStudentModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" id="studentSubmitBtn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200">Add Student</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Warning Modal -->
    <div id="addWarningModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Issue Warning</h3>
                    <button onclick="closeModal('addWarningModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addWarningForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Student</label>
                        <select name="studentId" id="warningStudentSelect" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Choose a student</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Warning Reason</label>
                        <textarea name="reason" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3" placeholder="Enter reason for warning..." required></textarea>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addWarningModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-200">Issue Warning</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Teacher Modal -->
    <div id="addTeacherModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Add New Teacher</h3>
                    <button onclick="closeModal('addTeacherModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addTeacherForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Teacher ID</label>
                            <input type="text" name="teacherId" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                            <input type="text" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                            <select name="subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Subject</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="English">English</option>
                                <option value="Urdu">Urdu</option>
                                <option value="Islamic Studies">Islamic Studies</option>
                                <option value="Pakistan Studies">Pakistan Studies</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number</label>
                            <input type="tel" name="contact" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <input type="email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Qualification</label>
                            <input type="text" name="qualification" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Experience (Years)</label>
                            <input type="number" name="experience" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" min="0" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select name="status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="Active">Active</option>
                                <option value="On Leave">On Leave</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Assigned Classes</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" name="classes" value="ICS-I" class="mr-2">
                                <span class="text-sm">ICS-I</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="classes" value="Pre-Engineering-I" class="mr-2">
                                <span class="text-sm">Pre-Engineering-I</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="classes" value="Pre-Medical-I" class="mr-2">
                                <span class="text-sm">Pre-Medical-I</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="classes" value="ICS-II" class="mr-2">
                                <span class="text-sm">ICS-II</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="classes" value="Pre-Engineering-II" class="mr-2">
                                <span class="text-sm">Pre-Engineering-II</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="classes" value="Pre-Medical-II" class="mr-2">
                                <span class="text-sm">Pre-Medical-II</span>
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addTeacherModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200">Add Teacher</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add University Modal -->
    <div id="addUniversityModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Add University Application</h3>
                    <button onclick="closeModal('addUniversityModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addUniversityForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Student (2nd Year Only)</label>
                        <select name="studentId" id="universityStudentSelect" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Choose a 2nd year student</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">University</label>
                        <select name="university" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select University</option>
                            <option value="NET">NET</option>
                            <option value="FAST">FAST</option>
                            <option value="LUMS">LUMS</option>
                            <option value="NUST">NUST</option>
                            <option value="COMSATS">COMSATS</option>
                            <option value="UET">UET</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Progress (%)</label>
                        <input type="number" name="progress" min="0" max="100" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                        <select name="status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="Applied">Applied</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Accepted">Accepted</option>
                            <option value="Rejected">Rejected</option>
                            <option value="Pending">Pending</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addUniversityModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200">Add Application</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Upload Timetable Modal -->
    <div id="uploadTimetableModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Upload Timetable Image</h3>
                    <button onclick="closeModal('uploadTimetableModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="uploadTimetableForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Timetable Name</label>
                        <input type="text" name="timetableName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter timetable name" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Class</label>
                        <select name="class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select Class</option>
                            <option value="ICS-I">ICS-I</option>
                            <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                            <option value="Pre-Medical-I">Pre-Medical-I</option>
                            <option value="ICS-II">ICS-II</option>
                            <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                            <option value="Pre-Medical-II">Pre-Medical-II</option>
                            <option value="All Classes">All Classes</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Upload Image</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                            <input type="file" id="timetableImageInput" accept="image/*" class="hidden" onchange="handleTimetableImageUpload(event)">
                            <div id="uploadArea" onclick="document.getElementById('timetableImageInput').click()" class="cursor-pointer">
                                <svg class="w-12 h-12 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <p class="text-gray-600">Click to upload timetable image</p>
                                <p class="text-sm text-gray-500">PNG, JPG up to 10MB</p>
                            </div>
                            <div id="imagePreview" class="hidden mt-4">
                                <img id="previewImg" class="max-w-full h-48 mx-auto rounded-lg" alt="Preview">
                                <p id="fileName" class="text-sm text-gray-600 mt-2"></p>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('uploadTimetableModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200">Upload Timetable</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Timetable Modal -->
    <div id="createTimetableModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Create New Timetable</h3>
                    <button onclick="closeModal('createTimetableModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="createTimetableForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Timetable Name</label>
                        <input type="text" name="timetableName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter timetable name" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">View Type</label>
                        <select name="viewType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="weekly">Weekly View</option>
                            <option value="monthly">Monthly View</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Class</label>
                        <select name="class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select Class</option>
                            <option value="ICS-I">ICS-I</option>
                            <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                            <option value="Pre-Medical-I">Pre-Medical-I</option>
                            <option value="ICS-II">ICS-II</option>
                            <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                            <option value="Pre-Medical-II">Pre-Medical-II</option>
                            <option value="All Classes">All Classes</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('createTimetableModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200">Create Timetable</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Result Modal -->
    <div id="addResultModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Add Student Result</h3>
                    <button onclick="closeModal('addResultModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addResultForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Student</label>
                        <select name="studentId" id="resultStudentSelect" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Choose a student</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                            <select name="subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Subject</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="English">English</option>
                                <option value="Urdu">Urdu</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Exam Type</label>
                            <select name="examType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Type</option>
                                <option value="Monthly Test">Monthly Test</option>
                                <option value="Mid Term">Mid Term</option>
                                <option value="Final Term">Final Term</option>
                                <option value="Annual Exam">Annual Exam</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Marks Obtained</label>
                            <input type="number" name="marksObtained" min="0" max="100" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Total Marks</label>
                            <input type="number" name="totalMarks" min="1" value="100" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Exam Date</label>
                        <input type="date" name="examDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addResultModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200">Add Result</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Exam Modal -->
    <div id="addExamModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Schedule New Exam</h3>
                    <button onclick="closeModal('addExamModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addExamForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Exam Name</label>
                        <input type="text" name="examName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Mathematics Mid Term" required>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                            <select name="subject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Subject</option>
                                <option value="Mathematics">Mathematics</option>
                                <option value="Physics">Physics</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="English">English</option>
                                <option value="Urdu">Urdu</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Class</label>
                            <select name="class" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Class</option>
                                <option value="ICS-I">ICS-I</option>
                                <option value="Pre-Engineering-I">Pre-Engineering-I</option>
                                <option value="Pre-Medical-I">Pre-Medical-I</option>
                                <option value="ICS-II">ICS-II</option>
                                <option value="Pre-Engineering-II">Pre-Engineering-II</option>
                                <option value="Pre-Medical-II">Pre-Medical-II</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                            <input type="date" name="examDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Time</label>
                            <input type="time" name="examTime" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Duration (minutes)</label>
                            <input type="number" name="duration" min="30" max="300" value="120" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Room</label>
                            <input type="text" name="room" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Room 101" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Exam Type</label>
                        <select name="examType" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select Type</option>
                            <option value="Monthly Test">Monthly Test</option>
                            <option value="Mid Term">Mid Term</option>
                            <option value="Final Term">Final Term</option>
                            <option value="Annual Exam">Annual Exam</option>
                            <option value="Quiz">Quiz</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addExamModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200">Schedule Exam</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Student Uni Modal -->
    <div id="addStudentUniModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Add Student to University Program</h3>
                    <button onclick="closeModal('addStudentUniModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addStudentUniForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select 2nd Year Student</label>
                        <select name="studentId" id="uniStudentSelect" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Choose a 2nd year student</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Target University</label>
                        <select name="university" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select University</option>
                            <option value="NET">NET</option>
                            <option value="FAST">FAST</option>
                            <option value="LUMS">LUMS</option>
                            <option value="NUST">NUST</option>
                            <option value="COMSATS">COMSATS</option>
                            <option value="UET">UET</option>
                            <option value="IBA">IBA</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Program/Field</label>
                        <select name="program" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Select Program</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Software Engineering">Software Engineering</option>
                            <option value="Electrical Engineering">Electrical Engineering</option>
                            <option value="Mechanical Engineering">Mechanical Engineering</option>
                            <option value="Civil Engineering">Civil Engineering</option>
                            <option value="Business Administration">Business Administration</option>
                            <option value="Medicine">Medicine</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Application Progress (%)</label>
                            <input type="number" name="progress" min="0" max="100" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select name="status" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="Planning">Planning</option>
                                <option value="Applied">Applied</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Interview">Interview</option>
                                <option value="Accepted">Accepted</option>
                                <option value="Rejected">Rejected</option>
                                <option value="Waitlisted">Waitlisted</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Notes</label>
                        <textarea name="notes" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Additional notes about application..."></textarea>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addStudentUniModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200">Add to Program</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Alumni Modal -->
    <div id="addAlumniModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Add Alumni Record</h3>
                    <button onclick="closeModal('addAlumniModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addAlumniForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">College Number</label>
                            <input type="text" name="collegeNumber" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                            <input type="text" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Group (During College)</label>
                            <select name="group" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Group</option>
                                <option value="ICS">ICS</option>
                                <option value="Pre-Engineering">Pre-Engineering</option>
                                <option value="Pre-Medical">Pre-Medical</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Graduation Year</label>
                            <select name="graduationYear" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Year</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                                <option value="2021">2021</option>
                                <option value="2020">2020</option>
                                <option value="2019">2019</option>
                                <option value="2018">2018</option>
                                <option value="2017">2017</option>
                                <option value="2016">2016</option>
                                <option value="2015">2015</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Current Field</label>
                            <select name="currentField" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select Field</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Medical">Medical</option>
                                <option value="Computer Science">Computer Science</option>
                                <option value="Business">Business</option>
                                <option value="Teaching">Teaching</option>
                                <option value="Government Job">Government Job</option>
                                <option value="Private Job">Private Job</option>
                                <option value="Entrepreneur">Entrepreneur</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">University/Organization</label>
                            <input type="text" name="organization" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., FAST University, Microsoft" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Position/Degree</label>
                            <input type="text" name="position" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Software Engineer, MBBS Student" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Number</label>
                            <input type="tel" name="contact" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <input type="email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn Profile</label>
                            <input type="url" name="linkedin" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="https://linkedin.com/in/...">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Success Story/Notes</label>
                        <textarea name="notes" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Brief success story or additional notes..."></textarea>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addAlumniModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200">Add Alumni</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Hostel Student Modal -->
    <div id="addHostelStudentModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800">Add Student to Hostel</h3>
                    <button onclick="closeModal('addHostelStudentModal')" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="addHostelStudentForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Student</label>
                        <select name="studentId" id="hostelStudentSelect" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="">Choose a student</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">House</label>
                            <select name="house" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select House</option>
                                <option value="Ikhlas">Ikhlas</option>
                                <option value="Ihsaan">Ihsaan</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Room Number</label>
                            <input type="text" name="roomNumber" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 101, 205" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Monthly Fee</label>
                        <input type="number" name="monthlyFee" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 15000" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Admission Date</label>
                        <input type="date" name="admissionDate" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Special Requirements</label>
                        <textarea name="requirements" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Any special dietary or medical requirements..."></textarea>
                    </div>
                    <div class="flex justify-end space-x-4 pt-4">
                        <button type="button" onclick="closeModal('addHostelStudentModal')" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">Cancel</button>
                        <button type="submit" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition duration-200">Add to Hostel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let currentUserRole = null;
        let students = [];
        let teachers = [];
        let warnings = [];
        let universityApplications = [];
        let timetables = [];
        let currentTimetable = null;
        let sidebarOpen = false;
        let editingStudentId = null;
        let results = [];
        let exams = [];
        let attendanceRecords = [];
        let alumni = [];
        let hostelStudents = [];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadSampleData();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Mobile menu toggle
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            }
            
            const mobileOverlay = document.getElementById('mobileOverlay');
            if (mobileOverlay) {
                mobileOverlay.addEventListener('click', closeMobileMenu);
            }
            
            // Profile dropdown
            const profileBtn = document.getElementById('profileBtn');
            if (profileBtn) {
                profileBtn.addEventListener('click', toggleProfileDropdown);
            }
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('#profileBtn')) {
                    const dropdown = document.getElementById('profileDropdown');
                    if (dropdown) {
                        dropdown.classList.add('hidden');
                    }
                }
            });
            
            // Handle window resize
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    closeMobileMenu();
                }
            });
        }

        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebarOpen = !sidebarOpen;
            
            if (sidebarOpen) {
                sidebar.classList.add('open');
                overlay.classList.remove('hidden');
            } else {
                sidebar.classList.remove('open');
                overlay.classList.add('hidden');
            }
        }
        
        function closeMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebarOpen = false;
            sidebar.classList.remove('open');
            overlay.classList.add('hidden');
        }
        
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            if (dropdown) {
                dropdown.classList.toggle('hidden');
            }
        }

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const role = document.getElementById('role').value;

            if (!username) {
                alert('Please enter a username');
                return;
            }

            // Check if user exists in localStorage
            const storedPassword = localStorage.getItem(`user_${username}_${role}`);
            
            if (storedPassword === null) {
                // First time user - create new password
                if (!password) {
                    alert('Please create a new password for your account');
                    return;
                }
                localStorage.setItem(`user_${username}_${role}`, password);
                alert('Account created successfully! You can now login with these credentials.');
            } else {
                // Existing user - verify password
                if (password !== storedPassword) {
                    alert('Invalid password. Please try again.');
                    return;
                }
            }
            
            currentUser = username.charAt(0).toUpperCase() + username.slice(1);
            currentUserRole = role;
            
            // Update user info in UI
            document.getElementById('sidebarUserName').textContent = currentUser;
            document.getElementById('headerUserName').textContent = currentUser;
            document.getElementById('userInitials').textContent = currentUser.charAt(0);
            
            // Hide login screen and show dashboard
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('sidebar').classList.remove('hidden');
            
            // Show dashboard section by default
            showSection('dashboard');
            updateDashboardStats();
        });

        // Logout functionality
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                currentUserRole = null;
                document.getElementById('loginScreen').style.display = 'flex';
                document.getElementById('dashboard').style.display = 'none';
                document.getElementById('sidebar').classList.add('hidden');
                document.getElementById('loginForm').reset();
            }
        }

        // Navigation
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + 'Section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
                targetSection.classList.add('fade-in');
            }
            
            // Add active class to clicked nav item
            if (event && event.target) {
                const navItem = event.target.closest('.nav-item');
                if (navItem) {
                    navItem.classList.add('active');
                }
            }
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'students': 'Student Management',
                'timetable': 'Timetable Management',
                'warnings': 'Warning Letters',
                'results': 'Academic Results',
                'attendance': 'Attendance Management',
                'exams': 'Examination Management',
                'university': 'University Preparation',
                'alumni': 'Alumni Records',
                'teachers': 'Teacher Management',
                'hostel': 'Hostel Management'
            };
            
            const pageTitle = document.getElementById('pageTitle');
            if (pageTitle) {
                pageTitle.textContent = titles[sectionName] || 'Dashboard';
            }
            
            // Close mobile menu if open
            if (window.innerWidth < 768) {
                closeMobileMenu();
            }
            
            // Load section-specific data
            loadSectionData(sectionName);
        }

        function loadSectionData(sectionName) {
            switch(sectionName) {
                case 'dashboard':
                    updateDashboardStats();
                    break;
                case 'students':
                    displayStudents();
                    break;
                case 'warnings':
                    displayWarnings();
                    updateWarningStats();
                    break;
                case 'teachers':
                    displayTeachers();
                    updateTeacherStats();
                    break;
                case 'university':
                    displayUniversityApplications();
                    updateUniversityStats();
                    break;
                case 'timetable':
                    // Timetable loads on demand
                    break;
            }
        }

        function updateDashboardStats() {
            // Update stats with actual data
            setTimeout(() => {
                document.getElementById('totalStudentsCount').textContent = students.length || 0;
                document.getElementById('activeTeachersCount').textContent = teachers.filter(t => t.status === 'Active').length || 0;
                document.getElementById('pendingWarningsCount').textContent = warnings.filter(w => w.status === 'Active').length || 0;
                
                // Calculate class counts
                const firstYearCount = students.filter(s => s.class && s.class.includes('-I')).length || 0;
                const secondYearCount = students.filter(s => s.class && s.class.includes('-II')).length || 0;
                const hostelCount = hostelStudents.length || 0;
                
                document.getElementById('firstYearCount').textContent = firstYearCount;
                document.getElementById('secondYearCount').textContent = secondYearCount;
                document.getElementById('hostelStudentsCount').textContent = hostelCount;
            }, 500);
        }

        // Modal functions
        function showAddStudentModal() {
            document.getElementById('addStudentModal').classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Student management
        document.getElementById('addStudentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            
            if (editingStudentId) {
                // Edit existing student
                const studentIndex = students.findIndex(s => s.id === editingStudentId);
                if (studentIndex !== -1) {
                    students[studentIndex] = {
                        ...students[studentIndex],
                        collegeNumber: formData.get('collegeNumber'),
                        name: formData.get('name'),
                        fatherName: formData.get('fatherName'),
                        class: formData.get('class'),
                        house: formData.get('house'),
                        parentName: formData.get('parentName'),
                        parentContact: formData.get('parentContact'),
                        emergencyContact: formData.get('emergencyContact')
                    };
                    alert('Student updated successfully!');
                }
                editingStudentId = null;
            } else {
                // Add new student
                const student = {
                    id: Date.now(),
                    collegeNumber: formData.get('collegeNumber'),
                    name: formData.get('name'),
                    fatherName: formData.get('fatherName'),
                    class: formData.get('class'),
                    house: formData.get('house'),
                    parentName: formData.get('parentName'),
                    parentContact: formData.get('parentContact'),
                    emergencyContact: formData.get('emergencyContact'),
                    warnings: [],
                    results: [],
                    attendancePercentage: 0
                };
                students.push(student);
                alert('Student added successfully!');
            }
            
            displayStudents();
            updateDashboardStats();
            closeModal('addStudentModal');
            resetStudentForm();
        });

        // Warning system
        document.getElementById('addWarningForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const studentId = parseInt(formData.get('studentId'));
            const reason = formData.get('reason');
            
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            // Count existing warnings for this student
            const existingWarnings = warnings.filter(w => w.studentId === studentId && w.status !== 'Exited').length;
            
            if (existingWarnings >= 3) {
                alert('Student already has 3 warnings and has been exited!');
                return;
            }
            
            const warningLevel = existingWarnings + 1;
            const warning = {
                id: Date.now(),
                studentId: studentId,
                studentName: student.name,
                studentClass: student.class,
                collegeNumber: student.collegeNumber,
                level: warningLevel,
                reason: reason,
                date: new Date().toLocaleDateString(),
                status: warningLevel === 3 ? 'Exited' : 'Active'
            };
            
            warnings.push(warning);
            
            if (warningLevel === 3) {
                alert(`${student.name} has received their 3rd warning and has been exited from the college.`);
            } else {
                alert(`${warningLevel}${warningLevel === 1 ? 'st' : warningLevel === 2 ? 'nd' : 'rd'} warning issued to ${student.name}`);
            }
            
            displayWarnings();
            updateWarningStats();
            closeModal('addWarningModal');
            e.target.reset();
        });

        // Teacher management
        document.getElementById('addTeacherForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            
            // Get selected classes
            const selectedClasses = [];
            const classCheckboxes = document.querySelectorAll('input[name="classes"]:checked');
            classCheckboxes.forEach(checkbox => {
                selectedClasses.push(checkbox.value);
            });
            
            const teacher = {
                id: Date.now(),
                teacherId: formData.get('teacherId'),
                name: formData.get('name'),
                subject: formData.get('subject'),
                contact: formData.get('contact'),
                email: formData.get('email'),
                qualification: formData.get('qualification'),
                experience: formData.get('experience'),
                status: formData.get('status'),
                classes: selectedClasses
            };
            
            teachers.push(teacher);
            displayTeachers();
            updateTeacherStats();
            closeModal('addTeacherModal');
            e.target.reset();
            alert('Teacher added successfully!');
        });

        // University management
        document.getElementById('addUniversityForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const studentId = parseInt(formData.get('studentId'));
            
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            const application = {
                id: Date.now(),
                studentId: studentId,
                studentName: student.name,
                studentClass: student.class,
                collegeNumber: student.collegeNumber,
                university: formData.get('university'),
                progress: parseInt(formData.get('progress')),
                status: formData.get('status'),
                dateApplied: new Date().toLocaleDateString()
            };
            
            universityApplications.push(application);
            displayUniversityApplications();
            updateUniversityStats();
            closeModal('addUniversityModal');
            e.target.reset();
            alert('University application added successfully!');
        });

        function displayStudents() {
            const tbody = document.getElementById('studentsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (students.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="6" class="px-4 py-8 text-center text-gray-500">No students added yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            // Group students by class and sort
            const groupedStudents = {};
            students.forEach(student => {
                if (!groupedStudents[student.class]) {
                    groupedStudents[student.class] = [];
                }
                groupedStudents[student.class].push(student);
            });
            
            // Sort classes in order
            const classOrder = [
                'ICS-I',
                'Pre-Engineering-I', 
                'Pre-Medical-I',
                'ICS-II',
                'Pre-Engineering-II',
                'Pre-Medical-II'
            ];
            
            classOrder.forEach(className => {
                if (groupedStudents[className] && groupedStudents[className].length > 0) {
                    // Add class header
                    const headerRow = document.createElement('tr');
                    headerRow.className = 'bg-gradient-to-r from-blue-600 to-purple-600 text-white';
                    headerRow.innerHTML = `
                        <td colspan="6" class="px-4 py-2 text-sm font-bold">${className} (${groupedStudents[className].length} students)</td>
                    `;
                    tbody.appendChild(headerRow);
                    
                    // Add students in this class
                    groupedStudents[className].forEach(student => {
                        const row = document.createElement('tr');
                        row.className = 'hover:bg-gray-50';
                        row.innerHTML = `
                            <td class="px-4 py-3 text-sm text-gray-900">${student.collegeNumber}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">${student.name}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">${student.fatherName || 'N/A'}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">${student.class}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">${student.house}</td>
                            <td class="px-4 py-3 text-sm">
                                <div class="relative">
                                    <button onclick="toggleStudentMenu(${student.id})" class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                                        </svg>
                                    </button>
                                    <div id="studentMenu${student.id}" class="hidden absolute right-0 mt-1 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-10">
                                        <div class="py-1">
                                            <button onclick="viewStudent(${student.id})" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">View</button>
                                            <button onclick="editStudent(${student.id})" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Edit</button>
                                            <button onclick="deleteStudent(${student.id})" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                }
            });
        }

        function filterStudents() {
            const searchTerm = document.getElementById('studentSearch').value.toLowerCase();
            const classFilter = document.getElementById('classFilter').value;
            const houseFilter = document.getElementById('houseFilter').value;
            
            let filteredStudents = students;
            
            // Only filter by search if there's a search term
            if (searchTerm.trim()) {
                filteredStudents = filteredStudents.filter(student => {
                    return student.name.toLowerCase().includes(searchTerm) || 
                           student.collegeNumber.toLowerCase().includes(searchTerm);
                });
            }
            
            // Apply other filters
            if (classFilter) {
                filteredStudents = filteredStudents.filter(student => student.class === classFilter);
            }
            
            if (houseFilter) {
                filteredStudents = filteredStudents.filter(student => student.house === houseFilter);
            }
            
            displayFilteredStudents(filteredStudents);
        }

        function displayFilteredStudents(filteredStudents) {
            const tbody = document.getElementById('studentsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            filteredStudents.forEach(student => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${student.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${student.name}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${student.fatherName || 'N/A'}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${student.class}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${student.house}</td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editStudent(${student.id})" class="bg-yellow-500 text-white px-3 py-1 rounded text-xs hover:bg-yellow-600 transition duration-200 mr-2">Edit</button>
                        <button onclick="deleteStudent(${student.id})" class="bg-red-500 text-white px-3 py-1 rounded text-xs hover:bg-red-600 transition duration-200">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Three-dot menu functions
        function toggleStudentMenu(studentId) {
            // Close all other menus first
            document.querySelectorAll('[id^="studentMenu"]').forEach(menu => {
                if (menu.id !== `studentMenu${studentId}`) {
                    menu.classList.add('hidden');
                }
            });
            
            const menu = document.getElementById(`studentMenu${studentId}`);
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        // Close menus when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('[onclick^="toggleStudentMenu"]')) {
                document.querySelectorAll('[id^="studentMenu"]').forEach(menu => {
                    menu.classList.add('hidden');
                });
            }
        });

        function viewStudent(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            alert(`Student Details:\n\nName: ${student.name}\nCollege Number: ${student.collegeNumber}\nClass: ${student.class}\nFather: ${student.fatherName}\nHouse: ${student.house}\nParent: ${student.parentName}\nContact: ${student.parentContact}\nEmergency: ${student.emergencyContact}`);
            document.getElementById(`studentMenu${studentId}`).classList.add('hidden');
        }

        function editStudent(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            editingStudentId = studentId;
            
            // Fill form with existing data
            const form = document.getElementById('addStudentForm');
            form.collegeNumber.value = student.collegeNumber;
            form.name.value = student.name;
            form.fatherName.value = student.fatherName;
            form.class.value = student.class;
            form.house.value = student.house;
            form.parentName.value = student.parentName;
            form.parentContact.value = student.parentContact;
            form.emergencyContact.value = student.emergencyContact;
            
            // Update modal title and button
            document.getElementById('studentModalTitle').textContent = 'Edit Student';
            document.getElementById('studentSubmitBtn').textContent = 'Update Student';
            
            // Show modal
            document.getElementById('addStudentModal').classList.remove('hidden');
            document.getElementById(`studentMenu${studentId}`).classList.add('hidden');
        }

        function deleteStudent(studentId) {
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            if (confirm(`Are you sure you want to delete ${student.name}? This action cannot be undone.`)) {
                students = students.filter(s => s.id !== studentId);
                warnings = warnings.filter(w => w.studentId !== studentId);
                universityApplications = universityApplications.filter(u => u.studentId !== studentId);
                
                displayStudents();
                updateDashboardStats();
                alert('Student deleted successfully!');
            }
            document.getElementById(`studentMenu${studentId}`).classList.add('hidden');
        }

        function resetStudentForm() {
            editingStudentId = null;
            document.getElementById('studentModalTitle').textContent = 'Add New Student';
            document.getElementById('studentSubmitBtn').textContent = 'Add Student';
            document.getElementById('addStudentForm').reset();
        }

        // Warning system functions
        function showAddWarningModal() {
            populateStudentSelect('warningStudentSelect');
            document.getElementById('addWarningModal').classList.remove('hidden');
        }

        function displayWarnings() {
            const tbody = document.getElementById('warningsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (warnings.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="6" class="px-4 py-8 text-center text-gray-500">No warnings issued yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            warnings.forEach(warning => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const levelColor = warning.level === 1 ? 'bg-yellow-100 text-yellow-800' : 
                                 warning.level === 2 ? 'bg-orange-100 text-orange-800' : 
                                 'bg-red-100 text-red-800';
                
                const statusColor = warning.status === 'Exited' ? 'bg-gray-100 text-gray-800' : 'bg-green-100 text-green-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${warning.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${warning.studentName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${warning.studentClass}</td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${levelColor}">
                            ${warning.level}${warning.level === 1 ? 'st' : warning.level === 2 ? 'nd' : 'rd'} Warning
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor}">
                            ${warning.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="viewWarningHistory(${warning.studentId})" class="text-blue-600 hover:text-blue-800 mr-2">View History</button>
                        <button onclick="deleteWarning(${warning.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateWarningStats() {
            const firstWarnings = warnings.filter(w => w.level === 1 && w.status === 'Active').length;
            const secondWarnings = warnings.filter(w => w.level === 2 && w.status === 'Active').length;
            const thirdWarnings = warnings.filter(w => w.level === 3).length;
            const exitedStudents = warnings.filter(w => w.status === 'Exited').length;
            
            document.getElementById('firstWarningsCount').textContent = firstWarnings;
            document.getElementById('secondWarningsCount').textContent = secondWarnings;
            document.getElementById('thirdWarningsCount').textContent = thirdWarnings;
            document.getElementById('exitedStudentsCount').textContent = exitedStudents;
            document.getElementById('pendingWarningsCount').textContent = firstWarnings + secondWarnings;
        }

        function viewWarningHistory(studentId) {
            const studentWarnings = warnings.filter(w => w.studentId === studentId);
            const student = students.find(s => s.id === studentId);
            
            if (studentWarnings.length === 0) {
                alert('No warning history found for this student.');
                return;
            }
            
            let history = `Warning History for ${student ? student.name : 'Unknown Student'}:\n\n`;
            studentWarnings.forEach(w => {
                history += `${w.level}${w.level === 1 ? 'st' : w.level === 2 ? 'nd' : 'rd'} Warning - ${w.date}\nReason: ${w.reason}\nStatus: ${w.status}\n\n`;
            });
            
            alert(history);
        }

        function deleteWarning(warningId) {
            if (confirm('Are you sure you want to delete this warning?')) {
                warnings = warnings.filter(w => w.id !== warningId);
                displayWarnings();
                updateWarningStats();
                alert('Warning deleted successfully!');
            }
        }

        // Teacher system functions
        function showAddTeacherModal() {
            document.getElementById('addTeacherModal').classList.remove('hidden');
        }

        function displayTeachers() {
            const tbody = document.getElementById('teachersTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (teachers.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="7" class="px-4 py-8 text-center text-gray-500">No teachers added yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            teachers.forEach(teacher => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const statusColor = teacher.status === 'Active' ? 'bg-green-100 text-green-800' : 
                                   teacher.status === 'On Leave' ? 'bg-yellow-100 text-yellow-800' : 
                                   'bg-red-100 text-red-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.teacherId}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.name}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.subject}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.classes.join(', ')}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.contact}</td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor}">
                            ${teacher.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editTeacher(${teacher.id})" class="text-blue-600 hover:text-blue-800 mr-2">Edit</button>
                        <button onclick="deleteTeacher(${teacher.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateTeacherStats() {
            const scienceSubjects = ['Mathematics', 'Physics', 'Chemistry', 'Biology', 'Computer Science'];
            const artsSubjects = ['English', 'Urdu', 'Islamic Studies', 'Pakistan Studies'];
            
            const scienceTeachers = teachers.filter(t => scienceSubjects.includes(t.subject)).length;
            const artsTeachers = teachers.filter(t => artsSubjects.includes(t.subject)).length;
            const otherTeachers = teachers.filter(t => !scienceSubjects.includes(t.subject) && !artsSubjects.includes(t.subject)).length;
            
            document.getElementById('scienceTeachersCount').textContent = scienceTeachers;
            document.getElementById('artsTeachersCount').textContent = artsTeachers;
            document.getElementById('otherTeachersCount').textContent = otherTeachers;
            document.getElementById('activeTeachersCount').textContent = teachers.filter(t => t.status === 'Active').length;
        }

        function filterTeachers() {
            const searchTerm = document.getElementById('teacherSearch').value.toLowerCase();
            const subjectFilter = document.getElementById('subjectFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            
            let filteredTeachers = teachers;
            
            if (searchTerm.trim()) {
                filteredTeachers = filteredTeachers.filter(teacher => 
                    teacher.name.toLowerCase().includes(searchTerm)
                );
            }
            
            if (subjectFilter) {
                filteredTeachers = filteredTeachers.filter(teacher => teacher.subject === subjectFilter);
            }
            
            if (statusFilter) {
                filteredTeachers = filteredTeachers.filter(teacher => teacher.status === statusFilter);
            }
            
            displayFilteredTeachers(filteredTeachers);
        }

        function displayFilteredTeachers(filteredTeachers) {
            const tbody = document.getElementById('teachersTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            filteredTeachers.forEach(teacher => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const statusColor = teacher.status === 'Active' ? 'bg-green-100 text-green-800' : 
                                   teacher.status === 'On Leave' ? 'bg-yellow-100 text-yellow-800' : 
                                   'bg-red-100 text-red-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.teacherId}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.name}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.subject}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.classes.join(', ')}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${teacher.contact}</td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor}">
                            ${teacher.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editTeacher(${teacher.id})" class="text-blue-600 hover:text-blue-800 mr-2">Edit</button>
                        <button onclick="deleteTeacher(${teacher.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function editTeacher(teacherId) {
            alert('Edit teacher functionality will be implemented');
        }

        function deleteTeacher(teacherId) {
            const teacher = teachers.find(t => t.id === teacherId);
            if (!teacher) return;
            
            if (confirm(`Are you sure you want to delete ${teacher.name}? This action cannot be undone.`)) {
                teachers = teachers.filter(t => t.id !== teacherId);
                displayTeachers();
                updateTeacherStats();
                alert('Teacher deleted successfully!');
            }
        }

        // University system functions
        function showAddStudentUniModal() {
            populateSecondYearStudents('uniStudentSelect');
            document.getElementById('addStudentUniModal').classList.remove('hidden');
        }

        function showAddUniversityModal() {
            populateSecondYearStudents('universityStudentSelect');
            document.getElementById('addUniversityModal').classList.remove('hidden');
        }

        function populateSecondYearStudents(selectId = 'universityStudentSelect') {
            const select = document.getElementById(selectId);
            select.innerHTML = '<option value="">Choose a 2nd year student</option>';
            
            const secondYearStudents = students.filter(s => s.class && s.class.includes('-II'));
            secondYearStudents.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = `${student.collegeNumber} - ${student.name} (${student.class})`;
                select.appendChild(option);
            });
        }

        function displayUniversityApplications() {
            const tbody = document.getElementById('universityTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (universityApplications.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="7" class="px-4 py-8 text-center text-gray-500">No university applications yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            universityApplications.forEach(app => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const statusColor = app.status === 'Accepted' ? 'bg-green-100 text-green-800' : 
                                   app.status === 'Rejected' ? 'bg-red-100 text-red-800' : 
                                   app.status === 'In Progress' ? 'bg-blue-100 text-blue-800' :
                                   'bg-yellow-100 text-yellow-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${app.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${app.studentName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${app.studentClass}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${app.university}</td>
                    <td class="px-4 py-3 text-sm">
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full" style="width: ${app.progress}%"></div>
                        </div>
                        <span class="text-xs text-gray-600">${app.progress}%</span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor}">
                            ${app.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editUniversityApp(${app.id})" class="text-blue-600 hover:text-blue-800 mr-2">Edit</button>
                        <button onclick="deleteUniversityApp(${app.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateUniversityStats() {
            const netCount = universityApplications.filter(u => u.university === 'NET').length;
            const fastCount = universityApplications.filter(u => u.university === 'FAST').length;
            const lumsCount = universityApplications.filter(u => u.university === 'LUMS').length;
            const otherCount = universityApplications.filter(u => !['NET', 'FAST', 'LUMS'].includes(u.university)).length;
            
            document.getElementById('netCount').textContent = netCount;
            document.getElementById('fastCount').textContent = fastCount;
            document.getElementById('lumsCount').textContent = lumsCount;
            document.getElementById('otherUniversitiesCount').textContent = otherCount;
        }

        function editUniversityApp(appId) {
            alert('Edit university application functionality will be implemented');
        }

        function deleteUniversityApp(appId) {
            const app = universityApplications.find(u => u.id === appId);
            if (!app) return;
            
            if (confirm(`Are you sure you want to delete ${app.studentName}'s ${app.university} application?`)) {
                universityApplications = universityApplications.filter(u => u.id !== appId);
                displayUniversityApplications();
                updateUniversityStats();
                alert('University application deleted successfully!');
            }
        }

        // Timetable functions
        function createNewTimetable() {
            const view = document.getElementById('timetableView').value;
            const selectedClass = document.getElementById('timetableClass').value;
            
            if (view === 'weekly') {
                createWeeklyTimetable(selectedClass);
            } else {
                createMonthlyTimetable(selectedClass);
            }
        }

        function createWeeklyTimetable(selectedClass) {
            const grid = document.getElementById('timetableGrid');
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
            const timeSlots = ['8:00-9:00', '9:00-10:00', '10:00-11:00', '11:00-12:00', '12:00-1:00', '1:00-2:00', '2:00-3:00'];
            
            let html = '<table class="w-full border-collapse border border-gray-300">';
            
            // Header row
            html += '<tr><th class="border border-gray-300 p-2 bg-gray-100">Time</th>';
            days.forEach(day => {
                html += `<th class="border border-gray-300 p-2 bg-gray-100">${day}</th>`;
            });
            html += '</tr>';
            
            // Time slot rows
            timeSlots.forEach((time, timeIndex) => {
                html += `<tr><td class="border border-gray-300 p-2 bg-gray-50 font-medium">${time}</td>`;
                days.forEach((day, dayIndex) => {
                    const cellId = `cell-${timeIndex}-${dayIndex}`;
                    html += `<td class="border border-gray-300 p-2 h-12">
                        <input type="text" id="${cellId}" class="w-full h-full border-none outline-none bg-transparent" 
                               placeholder="Click to edit" onchange="saveCellData('${cellId}', this.value)">
                    </td>`;
                });
                html += '</tr>';
            });
            
            html += '</table>';
            grid.innerHTML = html;
            
            currentTimetable = {
                type: 'weekly',
                class: selectedClass,
                data: {},
                created: new Date().toISOString()
            };
        }

        function createMonthlyTimetable(selectedClass) {
            const grid = document.getElementById('timetableGrid');
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDay = new Date(year, month, 1).getDay();
            
            let html = '<table class="w-full border-collapse border border-gray-300">';
            
            // Header
            html += '<tr>';
            ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
                html += `<th class="border border-gray-300 p-2 bg-gray-100">${day}</th>`;
            });
            html += '</tr>';
            
            // Calendar days
            let date = 1;
            for (let week = 0; week < 6; week++) {
                html += '<tr>';
                for (let day = 0; day < 7; day++) {
                    if (week === 0 && day < firstDay) {
                        html += '<td class="border border-gray-300 p-2 h-20 bg-gray-50"></td>';
                    } else if (date > daysInMonth) {
                        html += '<td class="border border-gray-300 p-2 h-20 bg-gray-50"></td>';
                    } else {
                        const cellId = `month-cell-${date}`;
                        html += `<td class="border border-gray-300 p-2 h-20 align-top">
                            <div class="font-bold text-sm mb-1">${date}</div>
                            <input type="text" id="${cellId}" class="w-full text-xs border-none outline-none bg-transparent" 
                                   placeholder="Add event" onchange="saveCellData('${cellId}', this.value)">
                        </td>`;
                        date++;
                    }
                }
                html += '</tr>';
                if (date > daysInMonth) break;
            }
            
            html += '</table>';
            grid.innerHTML = html;
            
            currentTimetable = {
                type: 'monthly',
                class: selectedClass,
                data: {},
                created: new Date().toISOString()
            };
        }

        function saveCellData(cellId, value) {
            if (currentTimetable) {
                currentTimetable.data[cellId] = value;
            }
        }

        function addTimeSlot() {
            alert('Add time slot functionality - you can directly edit the timetable cells by clicking on them');
        }

        function saveTimetable() {
            if (!currentTimetable) {
                alert('Please create a timetable first');
                return;
            }
            
            const name = prompt('Enter a name for this timetable:');
            if (!name) return;
            
            currentTimetable.name = name;
            currentTimetable.saved = new Date().toISOString();
            
            timetables.push({...currentTimetable});
            alert('Timetable saved successfully!');
        }

        function showTimetableHistory() {
            if (timetables.length === 0) {
                alert('No saved timetables found');
                return;
            }
            
            let history = 'Saved Timetables:\n\n';
            timetables.forEach((tt, index) => {
                history += `${index + 1}. ${tt.name} (${tt.type}) - ${tt.class || 'All Classes'}\n   Saved: ${new Date(tt.saved).toLocaleDateString()}\n\n`;
            });
            
            alert(history);
        }

        function changeTimetableView() {
            if (currentTimetable) {
                const confirmChange = confirm('Changing view will clear current timetable. Continue?');
                if (!confirmChange) return;
            }
            createNewTimetable();
        }

        // Utility functions
        function populateStudentSelect(selectId) {
            const select = document.getElementById(selectId);
            select.innerHTML = '<option value="">Choose a student</option>';
            
            students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = `${student.collegeNumber} - ${student.name} (${student.class})`;
                select.appendChild(option);
            });
        }

        // Sample data
        function loadSampleData() {
            // Initialize with empty arrays - all stats will show 0 by default
            students = [];
            teachers = [];
            warnings = [];
            universityApplications = [];
            timetables = [];
            results = [];
            exams = [];
            attendanceRecords = [];
            alumni = [];
            hostelStudents = [];
        }

        // Timetable functions
        function showUploadTimetableModal() {
            document.getElementById('uploadTimetableModal').classList.remove('hidden');
        }

        function showCreateTimetableModal() {
            document.getElementById('createTimetableModal').classList.remove('hidden');
        }

        function handleTimetableImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('uploadArea').classList.add('hidden');
                    document.getElementById('imagePreview').classList.remove('hidden');
                    document.getElementById('previewImg').src = e.target.result;
                    document.getElementById('fileName').textContent = file.name;
                };
                reader.readAsDataURL(file);
            }
        }

        document.getElementById('uploadTimetableForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const file = document.getElementById('timetableImageInput').files[0];
            
            if (!file) {
                alert('Please select an image file');
                return;
            }
            
            const timetable = {
                id: Date.now(),
                name: formData.get('timetableName'),
                class: formData.get('class'),
                type: 'image',
                imageData: document.getElementById('previewImg').src,
                fileName: file.name,
                created: new Date().toISOString()
            };
            
            timetables.push(timetable);
            displayUploadedTimetable(timetable);
            closeModal('uploadTimetableModal');
            e.target.reset();
            document.getElementById('uploadArea').classList.remove('hidden');
            document.getElementById('imagePreview').classList.add('hidden');
            alert('Timetable uploaded successfully!');
        });

        document.getElementById('createTimetableForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            
            const timetableName = formData.get('timetableName');
            const viewType = formData.get('viewType');
            const selectedClass = formData.get('class');
            
            if (viewType === 'weekly') {
                createWeeklyTimetable(selectedClass, timetableName);
            } else {
                createMonthlyTimetable(selectedClass, timetableName);
            }
            
            closeModal('createTimetableModal');
            e.target.reset();
        });

        function displayUploadedTimetable(timetable) {
            const grid = document.getElementById('timetableGrid');
            grid.innerHTML = `
                <div class="text-center">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">${timetable.name} - ${timetable.class}</h3>
                    <div class="bg-white p-4 rounded-lg shadow-lg inline-block">
                        <img src="${timetable.imageData}" alt="${timetable.name}" class="max-w-full max-h-96 rounded-lg">
                        <p class="text-sm text-gray-600 mt-2">Uploaded: ${new Date(timetable.created).toLocaleDateString()}</p>
                    </div>
                </div>
            `;
        }

        function assignTimetableToTeacher() {
            const teacherId = document.getElementById('assignTeacher').value;
            const className = document.getElementById('assignClass').value;
            
            if (!teacherId || !className) {
                alert('Please select both teacher and class');
                return;
            }
            
            const teacher = teachers.find(t => t.id == teacherId);
            if (teacher) {
                alert(`Timetable for ${className} has been assigned to ${teacher.name}`);
            }
        }

        function populateTeacherSelect() {
            const select = document.getElementById('assignTeacher');
            select.innerHTML = '<option value="">Select Teacher</option>';
            
            teachers.forEach(teacher => {
                const option = document.createElement('option');
                option.value = teacher.id;
                option.textContent = `${teacher.name} - ${teacher.subject}`;
                select.appendChild(option);
            });
        }

        // Results functions
        function showAddResultModal() {
            populateStudentSelect('resultStudentSelect');
            document.getElementById('addResultModal').classList.remove('hidden');
        }

        function showResultHistoryModal() {
            if (results.length === 0) {
                alert('No results found');
                return;
            }
            
            let history = 'Results History:\n\n';
            results.forEach(result => {
                history += `${result.studentName} - ${result.subject}\n${result.examType}: ${result.marksObtained}/${result.totalMarks} (${result.grade})\nDate: ${result.examDate}\n\n`;
            });
            
            alert(history);
        }

        document.getElementById('addResultForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const studentId = parseInt(formData.get('studentId'));
            
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            const marksObtained = parseInt(formData.get('marksObtained'));
            const totalMarks = parseInt(formData.get('totalMarks'));
            const percentage = (marksObtained / totalMarks) * 100;
            
            let grade = 'F';
            if (percentage >= 90) grade = 'A+';
            else if (percentage >= 80) grade = 'A';
            else if (percentage >= 70) grade = 'B';
            else if (percentage >= 60) grade = 'C';
            else if (percentage >= 50) grade = 'D';
            
            const result = {
                id: Date.now(),
                studentId: studentId,
                studentName: student.name,
                studentClass: student.class,
                collegeNumber: student.collegeNumber,
                subject: formData.get('subject'),
                examType: formData.get('examType'),
                marksObtained: marksObtained,
                totalMarks: totalMarks,
                percentage: percentage.toFixed(1),
                grade: grade,
                examDate: formData.get('examDate'),
                dateAdded: new Date().toLocaleDateString()
            };
            
            results.push(result);
            displayResults();
            updateResultStats();
            closeModal('addResultModal');
            e.target.reset();
            alert('Result added successfully!');
        });

        function displayResults() {
            const tbody = document.getElementById('resultsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (results.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="9" class="px-4 py-8 text-center text-gray-500">No results added yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            results.forEach(result => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const gradeColor = result.grade === 'A+' || result.grade === 'A' ? 'bg-green-100 text-green-800' :
                                 result.grade === 'B' || result.grade === 'C' ? 'bg-yellow-100 text-yellow-800' :
                                 'bg-red-100 text-red-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${result.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.studentName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.studentClass}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.subject}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.examType}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.marksObtained}/${result.totalMarks} (${result.percentage}%)</td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${gradeColor}">
                            ${result.grade}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.examDate}</td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editResult(${result.id})" class="text-blue-600 hover:text-blue-800 mr-2">Edit</button>
                        <button onclick="deleteResult(${result.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateResultStats() {
            const totalResults = results.length;
            const passResults = results.filter(r => r.percentage >= 50).length;
            const passRate = totalResults > 0 ? ((passResults / totalResults) * 100).toFixed(1) : 0;
            const averageMarks = totalResults > 0 ? (results.reduce((sum, r) => sum + parseFloat(r.percentage), 0) / totalResults).toFixed(1) : 0;
            const topPerformers = results.filter(r => r.grade === 'A+' || r.grade === 'A').length;
            
            document.getElementById('totalResultsCount').textContent = totalResults;
            document.getElementById('passRateCount').textContent = passRate + '%';
            document.getElementById('averageMarksCount').textContent = averageMarks;
            document.getElementById('topPerformersCount').textContent = topPerformers;
        }

        function filterResults() {
            // Implementation for filtering results
            const searchTerm = document.getElementById('resultSearch').value.toLowerCase();
            const classFilter = document.getElementById('resultClassFilter').value;
            const examFilter = document.getElementById('resultExamFilter').value;
            const subjectFilter = document.getElementById('resultSubjectFilter').value;
            
            let filteredResults = results;
            
            if (searchTerm.trim()) {
                filteredResults = filteredResults.filter(result => 
                    result.studentName.toLowerCase().includes(searchTerm)
                );
            }
            
            if (classFilter) {
                filteredResults = filteredResults.filter(result => result.studentClass === classFilter);
            }
            
            if (examFilter) {
                filteredResults = filteredResults.filter(result => result.examType === examFilter);
            }
            
            if (subjectFilter) {
                filteredResults = filteredResults.filter(result => result.subject === subjectFilter);
            }
            
            displayFilteredResults(filteredResults);
        }

        function displayFilteredResults(filteredResults) {
            const tbody = document.getElementById('resultsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            filteredResults.forEach(result => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const gradeColor = result.grade === 'A+' || result.grade === 'A' ? 'bg-green-100 text-green-800' :
                                 result.grade === 'B' || result.grade === 'C' ? 'bg-yellow-100 text-yellow-800' :
                                 'bg-red-100 text-red-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${result.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.studentName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.studentClass}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.subject}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.examType}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.marksObtained}/${result.totalMarks} (${result.percentage}%)</td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${gradeColor}">
                            ${result.grade}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.examDate}</td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editResult(${result.id})" class="text-blue-600 hover:text-blue-800 mr-2">Edit</button>
                        <button onclick="deleteResult(${result.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function editResult(resultId) {
            alert('Edit result functionality will be implemented');
        }

        function deleteResult(resultId) {
            const result = results.find(r => r.id === resultId);
            if (!result) return;
            
            if (confirm(`Are you sure you want to delete ${result.studentName}'s ${result.subject} result?`)) {
                results = results.filter(r => r.id !== resultId);
                displayResults();
                updateResultStats();
                alert('Result deleted successfully!');
            }
        }

        // Attendance functions
        function loadClassAttendance() {
            const selectedClass = document.getElementById('attendanceClass').value;
            const selectedDate = document.getElementById('attendanceDate').value || new Date().toISOString().split('T')[0];
            const selectedSubject = document.getElementById('attendanceSubject').value || 'All Subjects';
            
            // Always show all students if no class is selected
            let classStudents = [];
            if (selectedClass) {
                classStudents = students.filter(s => s.class === selectedClass);
                document.getElementById('selectedClassName').textContent = selectedClass;
            } else {
                classStudents = students; // Show all students
                document.getElementById('selectedClassName').textContent = 'All Classes';
            }
            
            document.getElementById('attendanceDisplayDate').textContent = new Date(selectedDate).toLocaleDateString();
            document.getElementById('attendanceDisplaySubject').textContent = selectedSubject;
            
            // Generate date columns for the current month
            generateDateColumns(selectedDate);
            
            const tbody = document.getElementById('attendanceTableBody');
            tbody.innerHTML = '';
            
            if (classStudents.length === 0) {
                const daysInMonth = getDaysInMonth(selectedDate);
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="${3 + daysInMonth}" class="border border-gray-300 px-4 py-8 text-center text-gray-500">No students found. Please add students first.</td>`;
                tbody.appendChild(row);
                return;
            }
            
            // Sort students by college number
            classStudents.sort((a, b) => a.collegeNumber.localeCompare(b.collegeNumber));
            
            classStudents.forEach((student, index) => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                let rowHTML = `
                    <td class="border border-gray-300 px-2 py-2 text-sm text-gray-900 font-medium">${index + 1}</td>
                    <td class="border border-gray-300 px-3 py-2 text-sm text-gray-900 font-medium">${student.collegeNumber}</td>
                    <td class="border border-gray-300 px-4 py-2 text-sm text-gray-900">${student.name}</td>
                `;
                
                // Add date columns
                const daysInMonth = getDaysInMonth(selectedDate);
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateKey = `${selectedDate.substring(0, 8)}${day.toString().padStart(2, '0')}`;
                    const existingAttendance = getAttendanceForDate(student.id, dateKey, selectedClass, selectedSubject);
                    
                    rowHTML += `
                        <td class="border border-gray-300 px-1 py-2 text-center">
                            <input type="text" 
                                   id="attendance_${student.id}_${day}" 
                                   value="${existingAttendance}" 
                                   class="w-8 h-8 text-center text-sm border-none outline-none bg-transparent font-bold"
                                   maxlength="1"
                                   placeholder=""
                                   onchange="saveAttendanceCell(${student.id}, ${day}, '${selectedClass}', '${selectedSubject}', this.value)"
                                   onkeyup="this.value = this.value.toUpperCase(); if(this.value && !['P','A','L'].includes(this.value)) this.value = '';">
                        </td>
                    `;
                }
                
                row.innerHTML = rowHTML;
                tbody.appendChild(row);
            });
            
            // Update live statistics
            updateLiveAttendanceStats();
        }
        
        function generateDateColumns(selectedDate) {
            const thead = document.querySelector('#attendanceTableBody').closest('table').querySelector('thead tr');
            
            // Remove existing date columns
            const existingDateCols = thead.querySelectorAll('.date-col');
            existingDateCols.forEach(col => col.remove());
            
            const daysInMonth = getDaysInMonth(selectedDate);
            
            // Add date columns
            for (let day = 1; day <= daysInMonth; day++) {
                const th = document.createElement('th');
                th.className = 'date-col border border-gray-300 px-1 py-2 text-center text-sm font-medium';
                th.textContent = day;
                thead.appendChild(th);
            }
        }
        
        function getDaysInMonth(dateString) {
            const date = new Date(dateString);
            return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
        }
        
        function getAttendanceForDate(studentId, date, className, subject) {
            const record = attendanceRecords.find(r => 
                r.date === date && 
                r.class === (className || 'All Classes') && 
                r.subject === subject
            );
            
            if (record) {
                const studentAttendance = record.attendance.find(a => a.studentId === studentId);
                if (studentAttendance) {
                    return studentAttendance.status === 'present' ? 'P' : 
                           studentAttendance.status === 'absent' ? 'A' : 
                           studentAttendance.status === 'late' ? 'L' : '';
                }
            }
            return '';
        }
        
        function saveAttendanceCell(studentId, day, className, subject, value) {
            const selectedDate = document.getElementById('attendanceDate').value || new Date().toISOString().split('T')[0];
            const dateKey = `${selectedDate.substring(0, 8)}${day.toString().padStart(2, '0')}`;
            
            if (!value || !['P', 'A', 'L'].includes(value.toUpperCase())) {
                return;
            }
            
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            // Remove existing record for this date
            attendanceRecords = attendanceRecords.filter(r => 
                !(r.date === dateKey && 
                  r.class === (className || 'All Classes') && 
                  r.subject === subject)
            );
            
            // Create new record
            const status = value === 'P' ? 'present' : value === 'A' ? 'absent' : 'late';
            const attendanceRecord = {
                id: Date.now(),
                class: className || 'All Classes',
                subject: subject,
                date: dateKey,
                attendance: [{
                    studentId: studentId,
                    studentName: student.name,
                    collegeNumber: student.collegeNumber,
                    class: student.class,
                    subject: subject,
                    date: dateKey,
                    status: status,
                    remarks: ''
                }],
                createdBy: currentUser,
                createdAt: new Date().toISOString()
            };
            
            attendanceRecords.push(attendanceRecord);
            updateAttendanceStats();
        }

        function updateLiveAttendanceStats() {
            calculateLiveStats();
        }
        
        function calculateLiveStats() {
            let presentCount = 0;
            let absentCount = 0;
            let lateCount = 0;
            
            // Count P, A, L values in attendance inputs
            document.querySelectorAll('input[id^="attendance_"]').forEach(input => {
                const value = input.value.toUpperCase();
                if (value === 'P') presentCount++;
                else if (value === 'A') absentCount++;
                else if (value === 'L') lateCount++;
            });
            
            const totalMarked = presentCount + absentCount + lateCount;
            const attendanceRate = totalMarked > 0 ? ((presentCount / totalMarked) * 100).toFixed(1) : 0;
            
            document.getElementById('presentTodayCount').textContent = presentCount;
            document.getElementById('absentTodayCount').textContent = absentCount;
            document.getElementById('lateArrivalsCount').textContent = lateCount;
            document.getElementById('attendanceRateCount').textContent = attendanceRate + '%';
        }

        function saveAttendance() {
            const selectedClass = document.getElementById('attendanceClass').value;
            const selectedDate = document.getElementById('attendanceDate').value || new Date().toISOString().split('T')[0];
            const selectedSubject = document.getElementById('attendanceSubject').value;
            
            if (!selectedSubject || selectedSubject === 'Select Subject') {
                alert('Please select a subject');
                return;
            }
            
            // Get students based on class selection
            let studentsToProcess = [];
            if (selectedClass) {
                studentsToProcess = students.filter(s => s.class === selectedClass);
            } else {
                studentsToProcess = students; // All students
            }
            
            let savedCount = 0;
            const daysInMonth = getDaysInMonth(selectedDate);
            
            // Process each day of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dateKey = `${selectedDate.substring(0, 8)}${day.toString().padStart(2, '0')}`;
                const attendanceData = [];
                
                studentsToProcess.forEach(student => {
                    const attendanceInput = document.getElementById(`attendance_${student.id}_${day}`);
                    if (attendanceInput && attendanceInput.value) {
                        const value = attendanceInput.value.toUpperCase();
                        if (['P', 'A', 'L'].includes(value)) {
                            const status = value === 'P' ? 'present' : value === 'A' ? 'absent' : 'late';
                            attendanceData.push({
                                studentId: student.id,
                                studentName: student.name,
                                collegeNumber: student.collegeNumber,
                                class: student.class,
                                subject: selectedSubject,
                                date: dateKey,
                                status: status,
                                remarks: ''
                            });
                        }
                    }
                });
                
                if (attendanceData.length > 0) {
                    // Remove existing attendance record for this specific date
                    attendanceRecords = attendanceRecords.filter(r => 
                        !(r.date === dateKey && 
                          r.class === (selectedClass || 'All Classes') && 
                          r.subject === selectedSubject)
                    );
                    
                    // Save new attendance record for this day
                    const attendanceRecord = {
                        id: Date.now() + day,
                        class: selectedClass || 'All Classes',
                        subject: selectedSubject,
                        date: dateKey,
                        attendance: attendanceData,
                        createdBy: currentUser,
                        createdAt: new Date().toISOString()
                    };
                    
                    attendanceRecords.push(attendanceRecord);
                    savedCount += attendanceData.length;
                }
            }
            
            updateAttendanceStats();
            if (savedCount > 0) {
                showNotification(`Attendance saved for ${savedCount} student entries`, 'success');
            } else {
                alert('No attendance data to save. Please mark attendance using P, A, or L.');
            }
        }

        function updateAttendanceStats() {
            const today = new Date().toISOString().split('T')[0];
            const todayRecords = attendanceRecords.filter(r => r.date === today);
            
            let presentCount = 0;
            let absentCount = 0;
            let lateCount = 0;
            
            todayRecords.forEach(record => {
                record.attendance.forEach(att => {
                    if (att.status === 'present') presentCount++;
                    else if (att.status === 'absent') absentCount++;
                    else if (att.status === 'late') lateCount++;
                });
            });
            
            const totalCount = presentCount + absentCount + lateCount;
            const attendanceRate = totalCount > 0 ? ((presentCount / totalCount) * 100).toFixed(1) : 0;
            
            document.getElementById('presentTodayCount').textContent = presentCount;
            document.getElementById('absentTodayCount').textContent = absentCount;
            document.getElementById('lateArrivalsCount').textContent = lateCount;
            document.getElementById('attendanceRateCount').textContent = attendanceRate + '%';
        }

        function markTodayAttendance() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('attendanceDate').value = today;
            loadAttendanceByDate();
        }

        function loadAttendanceByDate() {
            loadClassAttendance();
        }

        function showAttendanceHistoryModal() {
            if (attendanceRecords.length === 0) {
                alert('No attendance records found');
                return;
            }
            
            let history = 'Attendance History:\n\n';
            attendanceRecords.forEach(record => {
                history += `${record.class} - ${record.subject}\nDate: ${record.date}\nStudents: ${record.attendance.length}\n\n`;
            });
            
            alert(history);
        }

        // Exam functions
        function showAddExamModal() {
            document.getElementById('addExamModal').classList.remove('hidden');
        }

        function showExamHistoryModal() {
            if (exams.length === 0) {
                alert('No exams scheduled yet');
                return;
            }
            
            let history = 'Exam History:\n\n';
            exams.forEach(exam => {
                history += `${exam.examName}\n${exam.subject} - ${exam.class}\nDate: ${exam.examDate} ${exam.examTime}\nRoom: ${exam.room}\nStatus: ${exam.status}\n\n`;
            });
            
            alert(history);
        }

        document.getElementById('addExamForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            
            const exam = {
                id: Date.now(),
                examName: formData.get('examName'),
                subject: formData.get('subject'),
                class: formData.get('class'),
                examDate: formData.get('examDate'),
                examTime: formData.get('examTime'),
                duration: formData.get('duration'),
                room: formData.get('room'),
                examType: formData.get('examType'),
                status: 'Scheduled',
                createdAt: new Date().toISOString()
            };
            
            exams.push(exam);
            displayExams();
            updateExamStats();
            closeModal('addExamModal');
            e.target.reset();
            alert('Exam scheduled successfully!');
        });

        function displayExams() {
            const tbody = document.getElementById('examsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (exams.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="8" class="px-4 py-8 text-center text-gray-500">No exams scheduled yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            exams.forEach(exam => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const statusColor = exam.status === 'Completed' ? 'bg-green-100 text-green-800' :
                                   exam.status === 'Ongoing' ? 'bg-blue-100 text-blue-800' :
                                   exam.status === 'Cancelled' ? 'bg-red-100 text-red-800' :
                                   'bg-yellow-100 text-yellow-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.examName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.subject}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.class}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.examDate} ${exam.examTime}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.duration} min</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.room}</td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor}">
                            ${exam.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editExam(${exam.id})" class="text-blue-600 hover:text-blue-800 mr-2">Edit</button>
                        <button onclick="deleteExam(${exam.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateExamStats() {
            const today = new Date().toISOString().split('T')[0];
            const upcomingExams = exams.filter(e => e.examDate > today && e.status === 'Scheduled').length;
            const ongoingExams = exams.filter(e => e.status === 'Ongoing').length;
            const completedExams = exams.filter(e => e.status === 'Completed').length;
            
            document.getElementById('upcomingExamsCount').textContent = upcomingExams;
            document.getElementById('ongoingExamsCount').textContent = ongoingExams;
            document.getElementById('completedExamsCount').textContent = completedExams;
            document.getElementById('examStudentsCount').textContent = students.length;
        }

        function filterExams() {
            // Implementation for filtering exams
            const searchTerm = document.getElementById('examSearch').value.toLowerCase();
            const classFilter = document.getElementById('examClassFilter').value;
            const typeFilter = document.getElementById('examTypeFilter').value;
            const statusFilter = document.getElementById('examStatusFilter').value;
            
            let filteredExams = exams;
            
            if (searchTerm.trim()) {
                filteredExams = filteredExams.filter(exam => 
                    exam.examName.toLowerCase().includes(searchTerm) ||
                    exam.subject.toLowerCase().includes(searchTerm)
                );
            }
            
            if (classFilter) {
                filteredExams = filteredExams.filter(exam => exam.class === classFilter);
            }
            
            if (typeFilter) {
                filteredExams = filteredExams.filter(exam => exam.examType === typeFilter);
            }
            
            if (statusFilter) {
                filteredExams = filteredExams.filter(exam => exam.status === statusFilter);
            }
            
            displayFilteredExams(filteredExams);
        }

        function displayFilteredExams(filteredExams) {
            const tbody = document.getElementById('examsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            filteredExams.forEach(exam => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const statusColor = exam.status === 'Completed' ? 'bg-green-100 text-green-800' :
                                   exam.status === 'Ongoing' ? 'bg-blue-100 text-blue-800' :
                                   exam.status === 'Cancelled' ? 'bg-red-100 text-red-800' :
                                   'bg-yellow-100 text-yellow-800';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.examName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.subject}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.class}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.examDate} ${exam.examTime}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.duration} min</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${exam.room}</td>
                    <td class="px-4 py-3 text-sm">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor}">
                            ${exam.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="editExam(${exam.id})" class="text-blue-600 hover:text-blue-800 mr-2">Edit</button>
                        <button onclick="deleteExam(${exam.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function editExam(examId) {
            alert('Edit exam functionality will be implemented');
        }

        function deleteExam(examId) {
            const exam = exams.find(e => e.id === examId);
            if (!exam) return;
            
            if (confirm(`Are you sure you want to delete ${exam.examName}?`)) {
                exams = exams.filter(e => e.id !== examId);
                displayExams();
                updateExamStats();
                alert('Exam deleted successfully!');
            }
        }

        // Add Student Uni Form Handler
        document.getElementById('addStudentUniForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const studentId = parseInt(formData.get('studentId'));
            
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            const application = {
                id: Date.now(),
                studentId: studentId,
                studentName: student.name,
                studentClass: student.class,
                collegeNumber: student.collegeNumber,
                university: formData.get('university'),
                program: formData.get('program'),
                progress: parseInt(formData.get('progress')),
                status: formData.get('status'),
                notes: formData.get('notes'),
                dateAdded: new Date().toLocaleDateString()
            };
            
            universityApplications.push(application);
            displayUniversityApplications();
            updateUniversityStats();
            closeModal('addStudentUniModal');
            e.target.reset();
            alert('Student added to university program successfully!');
        });

        // Add Alumni Form Handler
        document.getElementById('addAlumniForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            
            const alumniRecord = {
                id: Date.now(),
                collegeNumber: formData.get('collegeNumber'),
                name: formData.get('name'),
                group: formData.get('group'),
                graduationYear: formData.get('graduationYear'),
                currentField: formData.get('currentField'),
                organization: formData.get('organization'),
                position: formData.get('position'),
                contact: formData.get('contact'),
                email: formData.get('email'),
                linkedin: formData.get('linkedin'),
                notes: formData.get('notes'),
                dateAdded: new Date().toLocaleDateString()
            };
            
            alumni.push(alumniRecord);
            displayAlumni();
            updateAlumniStats();
            closeModal('addAlumniModal');
            e.target.reset();
            alert('Alumni record added successfully!');
        });

        // Add Hostel Student Form Handler
        document.getElementById('addHostelStudentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const studentId = parseInt(formData.get('studentId'));
            
            const student = students.find(s => s.id === studentId);
            if (!student) return;
            
            // Check if student is already in hostel
            const existingHostelStudent = hostelStudents.find(h => h.studentId === studentId);
            if (existingHostelStudent) {
                alert('This student is already in the hostel!');
                return;
            }
            
            const hostelRecord = {
                id: Date.now(),
                studentId: studentId,
                studentName: student.name,
                studentClass: student.class,
                collegeNumber: student.collegeNumber,
                house: formData.get('house'),
                roomNumber: formData.get('roomNumber'),
                monthlyFee: parseInt(formData.get('monthlyFee')),
                admissionDate: formData.get('admissionDate'),
                requirements: formData.get('requirements'),
                attendancePercentage: Math.floor(Math.random() * 20) + 80, // Random 80-100%
                parentContact: student.parentContact,
                dateAdded: new Date().toLocaleDateString()
            };
            
            hostelStudents.push(hostelRecord);
            
            // Update student's house information
            const studentIndex = students.findIndex(s => s.id === studentId);
            if (studentIndex !== -1) {
                students[studentIndex].house = formData.get('house');
            }
            
            displayHostelStudents();
            updateHostelStats();
            closeModal('addHostelStudentModal');
            e.target.reset();
            alert('Student added to hostel successfully!');
        });

        // Alumni Functions
        function showAddAlumniModal() {
            document.getElementById('addAlumniModal').classList.remove('hidden');
        }

        function displayAlumni() {
            const tbody = document.getElementById('alumniTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (alumni.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="8" class="px-4 py-8 text-center text-gray-500">No alumni records yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            alumni.forEach(alumnus => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.name}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.group}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.graduationYear}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.currentField}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.organization}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.contact}</td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="viewAlumni(${alumnus.id})" class="text-blue-600 hover:text-blue-800 mr-2">View</button>
                        <button onclick="deleteAlumni(${alumnus.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateAlumniStats() {
            const totalAlumni = alumni.length;
            const engineeringAlumni = alumni.filter(a => a.currentField === 'Engineering').length;
            const medicalAlumni = alumni.filter(a => a.currentField === 'Medical').length;
            const csAlumni = alumni.filter(a => a.currentField === 'Computer Science').length;
            
            // Group-wise stats
            const icsAlumni = alumni.filter(a => a.group === 'ICS');
            const preEngAlumni = alumni.filter(a => a.group === 'Pre-Engineering');
            const preMedAlumni = alumni.filter(a => a.group === 'Pre-Medical');
            
            document.getElementById('totalAlumniCount').textContent = totalAlumni;
            document.getElementById('engineeringAlumniCount').textContent = engineeringAlumni;
            document.getElementById('medicalAlumniCount').textContent = medicalAlumni;
            document.getElementById('csAlumniCount').textContent = csAlumni;
            
            // Group-wise divisions
            document.getElementById('icsAlumniTotal').textContent = icsAlumni.length;
            document.getElementById('preEngAlumniTotal').textContent = preEngAlumni.length;
            document.getElementById('preMedAlumniTotal').textContent = preMedAlumni.length;
            
            // Success rates (simplified calculation)
            const icsSuccessRate = icsAlumni.length > 0 ? Math.round((icsAlumni.filter(a => ['Engineering', 'Medical', 'Computer Science'].includes(a.currentField)).length / icsAlumni.length) * 100) : 0;
            const preEngSuccessRate = preEngAlumni.length > 0 ? Math.round((preEngAlumni.filter(a => a.currentField === 'Engineering').length / preEngAlumni.length) * 100) : 0;
            const preMedSuccessRate = preMedAlumni.length > 0 ? Math.round((preMedAlumni.filter(a => a.currentField === 'Medical').length / preMedAlumni.length) * 100) : 0;
            
            document.getElementById('icsSuccessRate').textContent = icsSuccessRate + '%';
            document.getElementById('preEngSuccessRate').textContent = preEngSuccessRate + '%';
            document.getElementById('preMedSuccessRate').textContent = preMedSuccessRate + '%';
        }

        function filterAlumni() {
            const searchTerm = document.getElementById('alumniSearch').value.toLowerCase();
            const groupFilter = document.getElementById('alumniGroupFilter').value;
            const fieldFilter = document.getElementById('alumniFieldFilter').value;
            const yearFilter = document.getElementById('alumniYearFilter').value;
            
            let filteredAlumni = alumni;
            
            if (searchTerm.trim()) {
                filteredAlumni = filteredAlumni.filter(alumnus => 
                    alumnus.name.toLowerCase().includes(searchTerm) ||
                    alumnus.collegeNumber.toLowerCase().includes(searchTerm)
                );
            }
            
            if (groupFilter) {
                filteredAlumni = filteredAlumni.filter(alumnus => alumnus.group === groupFilter);
            }
            
            if (fieldFilter) {
                filteredAlumni = filteredAlumni.filter(alumnus => alumnus.currentField === fieldFilter);
            }
            
            if (yearFilter) {
                filteredAlumni = filteredAlumni.filter(alumnus => alumnus.graduationYear === yearFilter);
            }
            
            displayFilteredAlumni(filteredAlumni);
        }

        function displayFilteredAlumni(filteredAlumni) {
            const tbody = document.getElementById('alumniTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            filteredAlumni.forEach(alumnus => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.name}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.group}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.graduationYear}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.currentField}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.organization}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${alumnus.contact}</td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="viewAlumni(${alumnus.id})" class="text-blue-600 hover:text-blue-800 mr-2">View</button>
                        <button onclick="deleteAlumni(${alumnus.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function viewAlumni(alumniId) {
            const alumnus = alumni.find(a => a.id === alumniId);
            if (!alumnus) return;
            
            let details = `Alumni Details:\n\n`;
            details += `Name: ${alumnus.name}\n`;
            details += `College Number: ${alumnus.collegeNumber}\n`;
            details += `Group: ${alumnus.group}\n`;
            details += `Graduation Year: ${alumnus.graduationYear}\n`;
            details += `Current Field: ${alumnus.currentField}\n`;
            details += `Organization: ${alumnus.organization}\n`;
            details += `Position: ${alumnus.position}\n`;
            details += `Contact: ${alumnus.contact}\n`;
            if (alumnus.email) details += `Email: ${alumnus.email}\n`;
            if (alumnus.linkedin) details += `LinkedIn: ${alumnus.linkedin}\n`;
            if (alumnus.notes) details += `Notes: ${alumnus.notes}\n`;
            
            alert(details);
        }

        function deleteAlumni(alumniId) {
            const alumnus = alumni.find(a => a.id === alumniId);
            if (!alumnus) return;
            
            if (confirm(`Are you sure you want to delete ${alumnus.name}'s alumni record?`)) {
                alumni = alumni.filter(a => a.id !== alumniId);
                displayAlumni();
                updateAlumniStats();
                alert('Alumni record deleted successfully!');
            }
        }

        // Hostel Functions
        function showAddHostelStudentModal() {
            populateAllStudents('hostelStudentSelect');
            document.getElementById('addHostelStudentModal').classList.remove('hidden');
        }

        function populateAllStudents(selectId) {
            const select = document.getElementById(selectId);
            select.innerHTML = '<option value="">Choose a student</option>';
            
            students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = `${student.collegeNumber} - ${student.name} (${student.class})`;
                select.appendChild(option);
            });
        }

        function displayHostelStudents() {
            const tbody = document.getElementById('hostelTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (hostelStudents.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="8" class="px-4 py-8 text-center text-gray-500">No hostel students yet</td>';
                tbody.appendChild(row);
                return;
            }
            
            hostelStudents.forEach(hostelStudent => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const attendanceColor = hostelStudent.attendancePercentage >= 90 ? 'text-green-600' :
                                       hostelStudent.attendancePercentage >= 75 ? 'text-yellow-600' : 'text-red-600';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.studentName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.studentClass}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.house}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.roomNumber}</td>
                    <td class="px-4 py-3 text-sm font-medium ${attendanceColor}">${hostelStudent.attendancePercentage}%</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.parentContact}</td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="viewHostelStudent(${hostelStudent.id})" class="text-blue-600 hover:text-blue-800 mr-2">View</button>
                        <button onclick="deleteHostelStudent(${hostelStudent.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateHostelStats() {
            const totalHostelStudents = hostelStudents.length;
            const ikhlasStudents = hostelStudents.filter(h => h.house === 'Ikhlas');
            const ihsaanStudents = hostelStudents.filter(h => h.house === 'Ihsaan');
            
            const avgAttendance = totalHostelStudents > 0 ? 
                Math.round(hostelStudents.reduce((sum, h) => sum + h.attendancePercentage, 0) / totalHostelStudents) : 0;
            
            document.getElementById('totalHostelStudents').textContent = totalHostelStudents;
            document.getElementById('ikhlasHouseCount').textContent = ikhlasStudents.length;
            document.getElementById('ihsaanHouseCount').textContent = ihsaanStudents.length;
            document.getElementById('hostelAvgAttendance').textContent = avgAttendance + '%';
            
            // House-wise detailed stats
            const ikhlas1stYear = ikhlasStudents.filter(h => h.studentClass.includes('-I')).length;
            const ikhlas2ndYear = ikhlasStudents.filter(h => h.studentClass.includes('-II')).length;
            const ikhlasAvgAttendance = ikhlasStudents.length > 0 ? 
                Math.round(ikhlasStudents.reduce((sum, h) => sum + h.attendancePercentage, 0) / ikhlasStudents.length) : 0;
            
            const ihsaan1stYear = ihsaanStudents.filter(h => h.studentClass.includes('-I')).length;
            const ihsaan2ndYear = ihsaanStudents.filter(h => h.studentClass.includes('-II')).length;
            const ihsaanAvgAttendance = ihsaanStudents.length > 0 ? 
                Math.round(ihsaanStudents.reduce((sum, h) => sum + h.attendancePercentage, 0) / ihsaanStudents.length) : 0;
            
            document.getElementById('ikhlasTotal').textContent = ikhlasStudents.length;
            document.getElementById('ikhlas1stYear').textContent = ikhlas1stYear;
            document.getElementById('ikhlas2ndYear').textContent = ikhlas2ndYear;
            document.getElementById('ikhlasAttendance').textContent = ikhlasAvgAttendance + '%';
            
            document.getElementById('ihsaanTotal').textContent = ihsaanStudents.length;
            document.getElementById('ihsaan1stYear').textContent = ihsaan1stYear;
            document.getElementById('ihsaan2ndYear').textContent = ihsaan2ndYear;
            document.getElementById('ihsaanAttendance').textContent = ihsaanAvgAttendance + '%';
        }

        function filterHostelStudents() {
            const searchTerm = document.getElementById('hostelSearch').value.toLowerCase();
            const houseFilter = document.getElementById('hostelHouseFilter').value;
            const classFilter = document.getElementById('hostelClassFilter').value;
            
            let filteredHostelStudents = hostelStudents;
            
            if (searchTerm.trim()) {
                filteredHostelStudents = filteredHostelStudents.filter(hostelStudent => 
                    hostelStudent.studentName.toLowerCase().includes(searchTerm) ||
                    hostelStudent.collegeNumber.toLowerCase().includes(searchTerm)
                );
            }
            
            if (houseFilter) {
                filteredHostelStudents = filteredHostelStudents.filter(hostelStudent => hostelStudent.house === houseFilter);
            }
            
            if (classFilter) {
                filteredHostelStudents = filteredHostelStudents.filter(hostelStudent => hostelStudent.studentClass === classFilter);
            }
            
            displayFilteredHostelStudents(filteredHostelStudents);
        }

        function displayFilteredHostelStudents(filteredHostelStudents) {
            const tbody = document.getElementById('hostelTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            filteredHostelStudents.forEach(hostelStudent => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const attendanceColor = hostelStudent.attendancePercentage >= 90 ? 'text-green-600' :
                                       hostelStudent.attendancePercentage >= 75 ? 'text-yellow-600' : 'text-red-600';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.collegeNumber}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.studentName}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.studentClass}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.house}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.roomNumber}</td>
                    <td class="px-4 py-3 text-sm font-medium ${attendanceColor}">${hostelStudent.attendancePercentage}%</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${hostelStudent.parentContact}</td>
                    <td class="px-4 py-3 text-sm">
                        <button onclick="viewHostelStudent(${hostelStudent.id})" class="text-blue-600 hover:text-blue-800 mr-2">View</button>
                        <button onclick="deleteHostelStudent(${hostelStudent.id})" class="text-red-600 hover:text-red-800">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function viewHostelStudent(hostelStudentId) {
            const hostelStudent = hostelStudents.find(h => h.id === hostelStudentId);
            if (!hostelStudent) return;
            
            let details = `Hostel Student Details:\n\n`;
            details += `Name: ${hostelStudent.studentName}\n`;
            details += `College Number: ${hostelStudent.collegeNumber}\n`;
            details += `Class: ${hostelStudent.studentClass}\n`;
            details += `House: ${hostelStudent.house}\n`;
            details += `Room Number: ${hostelStudent.roomNumber}\n`;
            details += `Monthly Fee: Rs. ${hostelStudent.monthlyFee}\n`;
            details += `Admission Date: ${hostelStudent.admissionDate}\n`;
            details += `Attendance: ${hostelStudent.attendancePercentage}%\n`;
            details += `Parent Contact: ${hostelStudent.parentContact}\n`;
            if (hostelStudent.requirements) details += `Special Requirements: ${hostelStudent.requirements}\n`;
            
            alert(details);
        }

        function deleteHostelStudent(hostelStudentId) {
            const hostelStudent = hostelStudents.find(h => h.id === hostelStudentId);
            if (!hostelStudent) return;
            
            if (confirm(`Are you sure you want to remove ${hostelStudent.studentName} from the hostel?`)) {
                hostelStudents = hostelStudents.filter(h => h.id !== hostelStudentId);
                displayHostelStudents();
                updateHostelStats();
                alert('Student removed from hostel successfully!');
            }
        }

        // Update loadSectionData function
        function loadSectionData(sectionName) {
            switch(sectionName) {
                case 'dashboard':
                    updateDashboardStats();
                    break;
                case 'students':
                    displayStudents();
                    break;
                case 'warnings':
                    displayWarnings();
                    updateWarningStats();
                    break;
                case 'teachers':
                    displayTeachers();
                    updateTeacherStats();
                    populateTeacherSelect();
                    break;
                case 'university':
                    displayUniversityApplications();
                    updateUniversityStats();
                    break;
                case 'results':
                    displayResults();
                    updateResultStats();
                    break;
                case 'attendance':
                    updateAttendanceStats();
                    // Set today's date by default
                    document.getElementById('attendanceDate').value = new Date().toISOString().split('T')[0];
                    // Load all students by default
                    setTimeout(() => {
                        loadClassAttendance();
                    }, 100);
                    break;
                case 'exams':
                    displayExams();
                    updateExamStats();
                    break;
                case 'alumni':
                    displayAlumni();
                    updateAlumniStats();
                    break;
                case 'hostel':
                    displayHostelStudents();
                    updateHostelStats();
                    break;
                case 'timetable':
                    // Timetable loads on demand
                    break;
            }
        }

        // Add notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 fade-in ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                type === 'warning' ? 'bg-yellow-500 text-black' :
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'989a306ed07e9083',t:'MTc1OTYzODY4NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>



